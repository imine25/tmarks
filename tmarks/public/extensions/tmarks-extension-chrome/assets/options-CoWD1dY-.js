const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-7RnQ6Fxb.js","assets/prompts-CKcm-rRX.js","assets/urls-DpCSGfkZ.js"])))=>i.map(i=>d[i]);
import"./modulepreload-polyfill-YP0FEG5d.js";import{k as t,r as e,n as o,R as a}from"./react-vendor-D4eyb16t.js";import{L as r,u as s,a as n,i,b as l,E as d,S as b}from"./index-CTiEde2e.js";import{A as c,a as p,T as m}from"./urls-DpCSGfkZ.js";import{D as x}from"./prompts-CKcm-rRX.js";import{N as u,a as v}from"./newtabPrompts-DH5pji88.js";import{_ as h}from"./preload-helper-BhLMWRjL.js";import{d as g}from"./index-NQ3jknxk.js";import"./dexie-BAhLzSXZ.js";const f={openai:"OpenAI",claude:"Claude",deepseek:"DeepSeek",zhipu:"æ™ºè°±AI",modelscope:"ModelScope",siliconflow:"SiliconFlow",iflow:"è®¯é£žæ˜Ÿç«",custom:"è‡ªå®šä¹‰"};function y({connections:e,showAll:o,onToggleShowAll:a,onApply:r,onDelete:s,currentProvider:n}){const i=o?e:e.slice(0,3);return t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-sm font-semibold text-[var(--tab-options-title)]",children:"å·²ä¿å­˜çš„å…¨éƒ¨é…ç½®"}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-[var(--tab-options-text-muted)]",children:[t.jsxs("span",{children:["å…± ",e.length," ä¸ª"]}),e.length>3&&t.jsx("button",{type:"button",onClick:a,className:"rounded-full border border-[color:var(--tab-options-button-border)] px-2 py-0.5 text-[11px] font-medium text-[var(--tab-options-button-text)] transition-colors hover:bg-[var(--tab-options-button-hover-bg)]",children:o?"æ”¶èµ·":`å±•å¼€æ›´å¤š (${e.length-3})`})]})]}),0===e.length?t.jsx("div",{className:"rounded-xl border border-dashed border-[color:var(--tab-options-button-border)] bg-[color:var(--tab-options-card-bg)] p-6 text-sm text-[var(--tab-options-text-muted)]",children:"ç›®å‰è¿˜æ²¡æœ‰ä¿å­˜è¿‡ä»»ä½•é…ç½®ï¼Œå¡«å†™å¥½ API ä¿¡æ¯åŽç‚¹å‡»ã€Œä¿å­˜å½“å‰é…ç½®ã€å³å¯åˆ›å»ºé¢„è®¾ã€‚"}):t.jsx("div",{className:"grid gap-3 sm:grid-cols-2 xl:grid-cols-3",children:i.map((e,o)=>t.jsxs("div",{className:"group flex flex-col justify-between gap-3 rounded-2xl border border-[color:var(--tab-options-card-border)] bg-[color:var(--tab-options-card-bg)] p-4 shadow-sm transition-all hover:-translate-y-1 hover:border-[color:var(--tab-options-modal-border)] hover:shadow-lg",children:[t.jsxs("div",{className:"flex items-center justify-between gap-2",children:[t.jsx("p",{className:"text-sm font-semibold text-[var(--tab-options-title)] truncate",title:e.label||e.apiUrl||"æœªå‘½åé…ç½®",children:e.label||"æœªå‘½åé…ç½®"}),t.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-[color:var(--tab-options-pill-bg)] text-[var(--tab-options-pill-text)] px-2 py-0.5 text-[11px]",children:[t.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-[var(--tab-options-button-primary-bg)]"}),f[e.provider||n]]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{type:"button",onClick:()=>r(e,e.provider),className:"flex-1 rounded-lg bg-[var(--tab-options-button-primary-bg)] px-3 py-2 text-xs font-medium text-[var(--tab-options-button-primary-text)] transition-colors hover:bg-[var(--tab-options-button-primary-hover)]",children:"ä½¿ç”¨"}),t.jsx("button",{type:"button",onClick:()=>s(e,e.provider),className:"rounded-lg border border-[color:var(--tab-options-button-border)] px-3 py-2 text-xs font-medium text-[var(--tab-options-button-text)] transition-colors hover:bg-[var(--tab-options-button-hover-bg)]",children:"åˆ é™¤"})]})]},e.id||`${e.provider||"unknown"}-${e.label||e.apiUrl||"default"}-${o}`))})]})}const j={openai:"gpt-4o-mini (æŽ¨è) æˆ– gpt-4o",claude:"claude-3-5-sonnet-20241022 (æŽ¨è)",deepseek:"deepseek-chat",zhipu:"glm-4-flash (æŽ¨è) æˆ– glm-4-plus",modelscope:"qwen-plus æˆ– qwen-turbo",siliconflow:"Qwen/Qwen2.5-7B-Instruct",iflow:"spark-lite æˆ– spark-pro",custom:"è¯·è¾“å…¥æ¨¡åž‹åç§°"};function N({model:o,provider:a,availableModels:r,isFetchingModels:s,modelFetchError:n,modelFetchSupported:i,apiKey:l,onModelChange:d,onRefreshModels:b}){const[c,p]=e.useState(!1),m=e.useRef(null),x=r.length>0;e.useEffect(()=>{if(!c)return;const t=t=>{m.current&&!m.current.contains(t.target)&&p(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[c]),e.useEffect(()=>{x||p(!1)},[x]);return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("label",{className:"block text-sm font-medium text-[var(--tab-options-text)]",children:"æ¨¡åž‹"}),t.jsx("button",{type:"button",onClick:b,disabled:!i||s||!l.trim(),className:"text-xs px-3 py-1 rounded-lg transition-colors "+(i&&!s&&l.trim()?"bg-[var(--tab-options-button-primary-bg)] text-[var(--tab-options-button-primary-text)] hover:bg-[var(--tab-options-button-primary-hover)]":"bg-[var(--tab-options-button-hover-bg)] text-[var(--tab-options-text-muted)] cursor-not-allowed"),children:s?"èŽ·å–ä¸­...":"åˆ·æ–°æ¨¡åž‹"})]}),t.jsxs("div",{className:"relative w-full",ref:m,children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"text",value:o,onChange:t=>d(t.target.value),placeholder:j[a],className:"flex-1 px-3 py-2 border border-[color:var(--tab-options-button-border)] rounded-lg bg-[color:var(--tab-options-card-bg)] text-[var(--tab-options-title)] focus:outline-none focus:ring-2 focus:ring-[var(--tab-options-button-primary-bg)]"}),x&&t.jsxs("button",{type:"button",onClick:()=>p(t=>!t),className:"px-3 py-2 rounded-lg bg-[var(--tab-options-button-hover-bg)] text-[var(--tab-options-button-text)] hover:bg-[color:var(--tab-options-button-border)] transition-colors flex items-center gap-1",children:[t.jsx("span",{className:"text-sm font-medium",children:"é€‰æ‹©æ¨¡åž‹"}),t.jsx("span",{className:"transition-transform "+(c?"rotate-180":""),children:"â–¾"})]})]}),x&&c&&t.jsx("div",{className:"absolute z-10 mt-2 right-0 w-full max-h-[33vh] overflow-y-auto rounded-lg border border-[color:var(--tab-options-card-border)] bg-[color:var(--tab-options-modal-bg)] shadow-2xl",children:r.map(e=>{const a=o===e;return t.jsx("button",{type:"button",onClick:()=>(d(e),void p(!1)),className:"w-full text-left px-3 py-2 text-sm transition-colors "+(a?"bg-[color:var(--tab-options-pill-bg)] text-[var(--tab-options-pill-text)]":"text-[var(--tab-options-button-text)] hover:bg-[var(--tab-options-button-hover-bg)]"),children:e},e)})})]}),x&&t.jsxs("p",{className:"mt-2 text-xs text-[var(--tab-options-pill-text)]",children:["å·²èŽ·å– ",r.length," ä¸ªæ¨¡åž‹ï¼Œå¯ç›´æŽ¥é€‰æ‹©æˆ–æ‰‹åŠ¨è¾“å…¥ã€‚"]}),n&&t.jsxs("p",{className:"mt-2 text-xs text-[var(--tab-options-danger-text)]",children:["æ¨¡åž‹åˆ—è¡¨åŠ è½½å¤±è´¥ï¼š",n]}),!x&&i&&!n&&!s&&t.jsx("p",{className:"mt-2 text-xs text-[var(--tab-options-text-muted)]",children:"è¾“å…¥ API åœ°å€ä¸Ž Key åŽå¯åˆ·æ–°èŽ·å–å¯ç”¨æ¨¡åž‹åˆ—è¡¨ã€‚"})]})}const w={openai:"è¯·è¾“å…¥ OpenAI API Key",claude:"è¯·è¾“å…¥ Claude API Key",deepseek:"è¯·è¾“å…¥ DeepSeek API Key",zhipu:"è¯·è¾“å…¥æ™ºè°± API Key",modelscope:"è¯·è¾“å…¥ ModelScope API Key",siliconflow:"è¯·è¾“å…¥ SiliconFlow API Key",iflow:"è¯·è¾“å…¥è®¯é£žæ˜Ÿç« API Key",custom:"è¯·è¾“å…¥ API Key"},k={openai:{name:"OpenAI Platform",url:c.OPENAI},claude:{name:"Anthropic Console",url:c.CLAUDE},deepseek:{name:"DeepSeek Platform",url:c.DEEPSEEK},zhipu:{name:"æ™ºè°±AIå¼€æ”¾å¹³å°",url:c.ZHIPU},modelscope:{name:"ModelScope",url:c.MODELSCOPE},siliconflow:{name:"SiliconFlow",url:c.SILICONFLOW},iflow:{name:"è®¯é£žå¼€æ”¾å¹³å°",url:c.IFLOW}};function C({provider:e,apiKey:o,onChange:a}){const r=k[e];return t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-[var(--tab-options-text)] mb-3",children:"API Key"}),t.jsx("input",{type:"password",value:o,onChange:t=>a(t.target.value),placeholder:w[e],className:"w-full px-3 py-2 border border-[color:var(--tab-options-button-border)] rounded-lg bg-[color:var(--tab-options-card-bg)] text-[var(--tab-options-title)] focus:outline-none focus:ring-2 focus:ring-[var(--tab-options-button-primary-bg)]"}),r&&t.jsxs("p",{className:"mt-2 text-xs text-[var(--tab-options-text-muted)]",children:["èŽ·å– API Keyï¼š",t.jsx("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"text-[var(--tab-options-pill-text)] hover:underline",children:r.name})]})]})}function S({formData:o,setFormData:a,handleProviderChange:r,handleTestConnection:s,isTesting:n,availableModels:i,isFetchingModels:l,modelFetchError:d,onRefreshModels:b,modelFetchSupported:c,allSavedConnections:m,onApplySavedConnection:x,onDeleteSavedConnection:u,onSaveConnectionPreset:v}){const[h,g]=e.useState(!1);e.useEffect(()=>{m.length<=3&&h&&g(!1)},[m.length,h]);const f="custom"===o.aiProvider||"siliconflow"===o.aiProvider||"deepseek"===o.aiProvider||"openai"===o.aiProvider;return t.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-[color:var(--tab-options-card-border)] bg-[color:var(--tab-options-card-bg)] shadow-sm backdrop-blur transition-shadow hover:shadow-lg",children:[t.jsx("div",{className:"absolute inset-x-0 top-0 h-1 bg-gradient-to-r from-[var(--tab-options-modal-topbar-from)] via-[var(--tab-options-modal-topbar-via)] to-[var(--tab-options-modal-topbar-to)]"}),t.jsxs("div",{className:"p-8 pt-12 space-y-8",children:[t.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-semibold text-[var(--tab-options-title)]",children:"AI é…ç½®"}),t.jsx("p",{className:"mt-2 text-sm text-[var(--tab-options-text)]",children:"è¿žæŽ¥ä½ çš„æ™ºèƒ½æ ‡ç­¾æœåŠ¡ï¼Œç®¡ç†æ¨¡åž‹ä¸Žè°ƒç”¨ç­–ç•¥ã€‚"})]}),t.jsx("button",{type:"button",onClick:v,disabled:!o.apiKey.trim(),className:"inline-flex items-center justify-center rounded-lg px-4 py-2 text-sm font-medium transition-colors "+(o.apiKey.trim()?"bg-[var(--tab-options-button-primary-bg)] text-[var(--tab-options-button-primary-text)] hover:bg-[var(--tab-options-button-primary-hover)] shadow-sm":"bg-[var(--tab-options-button-hover-bg)] text-[var(--tab-options-text-muted)] cursor-not-allowed"),children:"ä¿å­˜å½“å‰é…ç½®"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsx(y,{connections:m,showAll:h,onToggleShowAll:()=>g(t=>!t),onApply:x,onDelete:u,currentProvider:o.aiProvider}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-[var(--tab-options-text)] mb-3",children:"AI å¼•æ“Ž"}),t.jsxs("select",{value:o.aiProvider,onChange:t=>r(t.target.value),className:"w-full px-3 py-2 border border-[color:var(--tab-options-button-border)] rounded-lg bg-[color:var(--tab-options-card-bg)] text-[var(--tab-options-title)] focus:outline-none focus:ring-2 focus:ring-[var(--tab-options-button-primary-bg)]",children:[t.jsx("option",{value:"openai",children:"OpenAI (GPT-4, GPT-3.5)"}),t.jsx("option",{value:"claude",children:"Claude (Anthropic)"}),t.jsx("option",{value:"deepseek",children:"DeepSeek"}),t.jsx("option",{value:"zhipu",children:"æ™ºè°±AI (GLM-4)"}),t.jsx("option",{value:"modelscope",children:"ModelScope (é€šä¹‰åƒé—®)"}),t.jsx("option",{value:"siliconflow",children:"SiliconFlow"}),t.jsx("option",{value:"iflow",children:"iFlytek Spark (è®¯é£žæ˜Ÿç«)"}),t.jsx("option",{value:"custom",children:"è‡ªå®šä¹‰ API"})]})]}),f&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-[var(--tab-options-text)] mb-3",children:"API åœ°å€"}),t.jsx("input",{type:"url",value:o.apiUrl,onChange:t=>a({...o,apiUrl:t.target.value}),placeholder:(()=>{switch(o.aiProvider){case"openai":return p.OPENAI;case"deepseek":return p.DEEPSEEK;case"siliconflow":return p.SILICONFLOW;default:return"è¯·è¾“å…¥è‡ªå®šä¹‰ API åœ°å€"}})(),className:"w-full px-3 py-2 border border-[color:var(--tab-options-button-border)] rounded-lg bg-[color:var(--tab-options-card-bg)] text-[var(--tab-options-title)] focus:outline-none focus:ring-2 focus:ring-[var(--tab-options-button-primary-bg)]"})]}),t.jsx(C,{provider:o.aiProvider,apiKey:o.apiKey,onChange:t=>a({...o,apiKey:t})}),t.jsx(N,{model:o.aiModel,provider:o.aiProvider,availableModels:i,isFetchingModels:l,modelFetchError:d,modelFetchSupported:c,apiKey:o.apiKey,onModelChange:t=>a({...o,aiModel:t}),onRefreshModels:b}),t.jsx("div",{children:t.jsx("button",{onClick:s,disabled:n||!o.apiKey,className:"px-4 py-2 bg-[var(--tab-options-button-primary-bg)] hover:bg-[var(--tab-options-button-primary-hover)] disabled:opacity-50 text-[var(--tab-options-button-primary-text)] rounded-lg transition-colors duration-200",children:n?"æµ‹è¯•ä¸­...":"æµ‹è¯•è¿žæŽ¥"})})]})]})]})}function P({formData:e,setFormData:o}){return t.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-[color:var(--tab-options-tmarks-card-border)] bg-[color:var(--tab-options-tmarks-card-bg)] shadow-sm backdrop-blur transition-shadow hover:shadow-lg",children:[t.jsx("div",{className:"absolute inset-x-0 top-0 h-1 bg-gradient-to-r from-[var(--tab-options-tmarks-topbar-from)] via-[var(--tab-options-tmarks-topbar-via)] to-[var(--tab-options-tmarks-topbar-to)]"}),t.jsxs("div",{className:"p-6 pt-10 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-[var(--tab-options-title)]",children:"åŒæ­¥è®¾ç½®"}),t.jsx("p",{className:"mt-2 text-sm text-[var(--tab-options-text)]",children:"é…ç½®åŒæ­¥æœåŠ¡ç«¯ï¼ˆTMarksï¼‰ä»¥åŒæ­¥ä¹¦ç­¾ä¸Žæ ‡ç­¾æ•°æ®ã€‚"})]}),t.jsx("span",{className:"px-3 py-1 rounded-full bg-[color:var(--tab-options-tmarks-badge-bg)] text-xs font-medium text-[var(--tab-options-tmarks-badge-text)]",children:"æŽ¨èä½¿ç”¨"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-[var(--tab-options-text)] mb-3",children:"æœåŠ¡å™¨åœ°å€"}),t.jsx("input",{type:"url",value:e.bookmarkApiUrl,onChange:t=>o({...e,bookmarkApiUrl:t.target.value}),placeholder:m.DEFAULT_BASE_URL,className:"w-full px-3 py-2 border border-[var(--tab-options-tmarks-input-border)] rounded-lg bg-[var(--tab-options-tmarks-input-bg)] text-[var(--tab-options-tmarks-input-text)] focus:outline-none focus:ring-2 focus:ring-[var(--tab-options-tmarks-input-ring)]"}),t.jsxs("p",{className:"mt-2 text-xs text-[var(--tab-options-text-muted)]",children:[t.jsx("span",{className:"font-medium",children:"TMarks å®˜æ–¹åœ°å€ï¼š"}),t.jsx("code",{className:"ml-1 px-1.5 py-0.5 bg-[var(--tab-options-tmarks-code-bg)] rounded",children:m.DEFAULT_BASE_URL})]}),t.jsxs("div",{className:"mt-2 p-3 bg-[var(--tab-options-tmarks-info-bg)] rounded-lg",children:[t.jsx("p",{className:"text-xs text-[var(--tab-options-tmarks-info-text)] mb-2",children:t.jsx("span",{className:"font-semibold text-[var(--tab-options-tmarks-info-title)]",children:"â„¹ï¸ TMarks è¯´æ˜Žï¼š"})}),t.jsxs("ul",{className:"text-xs text-[var(--tab-options-tmarks-info-text)] space-y-1",children:[t.jsx("li",{children:"â€¢ TMarks æ˜¯ä¸€ä¸ªæ ‡ç­¾ä¸ºä¸»çš„ä¹¦ç­¾å¯¼èˆª"}),t.jsx("li",{children:"â€¢ æ”¯æŒå¤šè®¾å¤‡åŒæ­¥ã€æ ‡ç­¾ç®¡ç†ã€å…¨æ–‡æœç´¢ç­‰åŠŸèƒ½"}),t.jsx("li",{children:"â€¢ å¡«å†™åŸºç¡€åœ°å€å³å¯ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¡¥å…¨ /api è·¯å¾„"}),t.jsxs("li",{children:["â€¢ ä¾‹å¦‚ï¼š",t.jsx("code",{className:"px-1 bg-[var(--tab-options-tmarks-code-bg)] rounded",children:"https://tmarks.669696.xyz"})]})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-[var(--tab-options-text)] mb-3",children:"API Key"}),t.jsx("input",{type:"password",value:e.bookmarkApiKey,onChange:t=>o({...e,bookmarkApiKey:t.target.value}),placeholder:"è¯·è¾“å…¥ TMarks API Key",className:"w-full px-3 py-2 border border-[var(--tab-options-tmarks-input-border)] rounded-lg bg-[var(--tab-options-tmarks-input-bg)] text-[var(--tab-options-tmarks-input-text)] focus:outline-none focus:ring-2 focus:ring-[var(--tab-options-tmarks-input-ring)]"}),t.jsx("p",{className:"mt-2 text-xs text-[var(--tab-options-text-muted)]",children:"åœ¨ TMarks è®¾ç½®ä¸­ç”Ÿæˆ API Key"})]})]})]})]})}function A({formData:e,setFormData:o}){return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-[color:var(--tab-options-card-border)] bg-[color:var(--tab-options-card-bg)] shadow-sm backdrop-blur transition-shadow hover:shadow-lg",children:[t.jsx("div",{className:"absolute inset-x-0 top-0 h-1 bg-gradient-to-r from-[var(--tab-options-modal-topbar-from)] via-[var(--tab-options-modal-topbar-via)] to-[var(--tab-options-modal-topbar-to)]"}),t.jsxs("div",{className:"p-6 pt-10 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-[var(--tab-options-title)]",children:"å¤–è§‚è®¾ç½®"}),t.jsx("p",{className:"mt-2 text-sm text-[var(--tab-options-text)]",children:"é…ç½®æ‰©å±•çš„ä¸»é¢˜ä¸Žæ ·å¼ã€‚"})]}),t.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-[var(--tab-options-text)] mb-2",children:"ä¸»é¢˜"}),t.jsxs("div",{className:"inline-flex rounded-xl border border-[color:var(--tab-options-card-border)] bg-[color:var(--tab-options-card-bg)] p-1 text-sm font-medium text-[var(--tab-options-text)]",children:[t.jsx("button",{type:"button",onClick:()=>o({...e,theme:"auto"}),className:"rounded-lg px-3 py-1.5 transition-colors "+("auto"===e.theme?"bg-[var(--tab-options-button-primary-bg)] text-[var(--tab-options-button-primary-text)] shadow":"hover:text-[var(--tab-options-title)]"),children:"è·Ÿéš"}),t.jsx("button",{type:"button",onClick:()=>o({...e,theme:"light"}),className:"rounded-lg px-3 py-1.5 transition-colors "+("light"===e.theme?"bg-[var(--tab-options-button-primary-bg)] text-[var(--tab-options-button-primary-text)] shadow":"hover:text-[var(--tab-options-title)]"),children:"æµ…è‰²"}),t.jsx("button",{type:"button",onClick:()=>o({...e,theme:"dark"}),className:"rounded-lg px-3 py-1.5 transition-colors "+("dark"===e.theme?"bg-[var(--tab-options-button-primary-bg)] text-[var(--tab-options-button-primary-text)] shadow":"hover:text-[var(--tab-options-title)]"),children:"æ·±è‰²"})]}),t.jsx("p",{className:"mt-2 text-xs text-[var(--tab-options-text-muted)]",children:"æŽ§åˆ¶æ‰©å±•çš„æ˜Žæš—æ¨¡å¼ã€‚"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-[var(--tab-options-text)] mb-2",children:"ä¸»é¢˜æ ·å¼"}),t.jsxs("div",{className:"inline-flex rounded-xl border border-[color:var(--tab-options-card-border)] bg-[color:var(--tab-options-card-bg)] p-1 text-sm font-medium text-[var(--tab-options-text)]",children:[t.jsx("button",{type:"button",onClick:()=>o({...e,themeStyle:"default"}),className:"rounded-lg px-3 py-1.5 transition-colors "+("default"===e.themeStyle?"bg-[var(--tab-options-button-primary-bg)] text-[var(--tab-options-button-primary-text)] shadow":"hover:text-[var(--tab-options-title)]"),children:"é»˜è®¤"}),t.jsx("button",{type:"button",onClick:()=>o({...e,themeStyle:"bw"}),className:"rounded-lg px-3 py-1.5 transition-colors "+("bw"===e.themeStyle?"bg-[var(--tab-options-button-primary-bg)] text-[var(--tab-options-button-primary-text)] shadow":"hover:text-[var(--tab-options-title)]"),children:"é»‘ç™½"}),t.jsx("button",{type:"button",onClick:()=>o({...e,themeStyle:"tmarks"}),className:"rounded-lg px-3 py-1.5 transition-colors "+("tmarks"===e.themeStyle?"bg-[var(--tab-options-button-primary-bg)] text-[var(--tab-options-button-primary-text)] shadow":"hover:text-[var(--tab-options-title)]"),children:"TMarks"})]}),t.jsx("p",{className:"mt-2 text-xs text-[var(--tab-options-text-muted)]",children:"åˆ‡æ¢æ‰©å±•çš„é…è‰²æ–¹æ¡ˆã€‚"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-[var(--tab-options-text)] mb-2",children:"æ ‡ç­¾æ ·å¼"}),t.jsxs("div",{className:"inline-flex rounded-xl border border-[color:var(--tab-options-card-border)] bg-[color:var(--tab-options-card-bg)] p-1 text-sm font-medium text-[var(--tab-options-text)]",children:[t.jsx("button",{type:"button",onClick:()=>o({...e,tagTheme:"classic"}),className:"rounded-lg px-3 py-1.5 transition-colors "+("classic"===e.tagTheme?"bg-[var(--tab-options-button-primary-bg)] text-[var(--tab-options-button-primary-text)] shadow":"hover:text-[var(--tab-options-title)]"),children:"ç»å…¸"}),t.jsx("button",{type:"button",onClick:()=>o({...e,tagTheme:"mono"}),className:"rounded-lg px-3 py-1.5 transition-colors "+("mono"===e.tagTheme?"bg-[var(--tab-options-button-primary-bg)] text-[var(--tab-options-button-primary-text)] shadow":"hover:text-[var(--tab-options-title)]"),children:"çº¯æ–‡å­—"}),t.jsx("button",{type:"button",onClick:()=>o({...e,tagTheme:"bw"}),className:"rounded-lg px-3 py-1.5 transition-colors "+("bw"===e.tagTheme?"bg-[var(--tab-options-button-primary-bg)] text-[var(--tab-options-button-primary-text)] shadow":"hover:text-[var(--tab-options-title)]"),children:"é»‘ç™½"})]}),t.jsx("p",{className:"mt-2 text-xs text-[var(--tab-options-text-muted)]",children:"å¼¹çª—å†…æ ‡ç­¾å±•ç¤ºé£Žæ ¼ã€‚"})]})]})]})]}),t.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-[color:var(--tab-options-card-border)] bg-[color:var(--tab-options-card-bg)] shadow-sm backdrop-blur transition-shadow hover:shadow-lg",children:[t.jsx("div",{className:"absolute inset-x-0 top-0 h-1 bg-gradient-to-r from-[var(--tab-options-modal-topbar-from)] via-[var(--tab-options-modal-topbar-via)] to-[var(--tab-options-modal-topbar-to)]"}),t.jsxs("div",{className:"p-6 pt-10 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-[var(--tab-options-title)]",children:"ä¿å­˜é»˜è®¤å€¼"}),t.jsx("p",{className:"mt-2 text-sm text-[var(--tab-options-text)]",children:"é…ç½®ä¿å­˜ä¹¦ç­¾æ—¶çš„é»˜è®¤é€‰é¡¹ã€‚"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-[var(--tab-options-text)] mb-2",children:"é»˜è®¤å¯è§æ€§"}),t.jsxs("div",{className:"inline-flex rounded-xl border border-[color:var(--tab-options-card-border)] bg-[color:var(--tab-options-card-bg)] p-1 text-sm font-medium text-[var(--tab-options-text)]",children:[t.jsx("button",{type:"button",onClick:()=>o({...e,defaultVisibility:"public"}),className:"rounded-lg px-3 py-1.5 transition-colors "+("public"===e.defaultVisibility?"bg-[var(--tab-options-button-primary-bg)] text-[var(--tab-options-button-primary-text)] shadow":"hover:text-[var(--tab-options-title)]"),children:"å…¬å¼€"}),t.jsx("button",{type:"button",onClick:()=>o({...e,defaultVisibility:"private"}),className:"rounded-lg px-3 py-1.5 transition-colors "+("private"===e.defaultVisibility?"bg-[var(--tab-options-button-primary-bg)] text-[var(--tab-options-button-primary-text)] shadow":"hover:text-[var(--tab-options-title)]"),children:"éšç§"})]}),t.jsx("p",{className:"mt-2 text-xs text-[var(--tab-options-text-muted)]",children:"ä¿å­˜ä¹¦ç­¾æ—¶çš„é»˜è®¤å¯è§æ€§ã€‚"})]}),t.jsxs("div",{className:"flex items-center justify-between py-3 border-t border-[color:var(--tab-options-card-border)]",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-[var(--tab-options-text)]",children:"é»˜è®¤åŒ…å«å°é¢å›¾"}),t.jsx("p",{className:"mt-1 text-xs text-[var(--tab-options-text-muted)]",children:"ä¿å­˜æ—¶æ˜¯å¦åŒ…å«é¡µé¢å°é¢å›¾ã€‚"})]}),t.jsx("button",{type:"button",role:"switch","aria-checked":e.defaultIncludeThumbnail,onClick:()=>o({...e,defaultIncludeThumbnail:!e.defaultIncludeThumbnail}),className:"relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-[var(--tab-options-button-primary-bg)] focus:ring-offset-2 "+(e.defaultIncludeThumbnail?"bg-[var(--tab-options-button-primary-bg)]":"bg-[var(--tab-options-button-hover-bg)]"),children:t.jsx("span",{className:"pointer-events-none inline-block h-5 w-5 transform rounded-full bg-[var(--tab-options-switch-thumb)] shadow ring-0 transition duration-200 ease-in-out "+(e.defaultIncludeThumbnail?"translate-x-5":"translate-x-0")})})]}),t.jsxs("div",{className:"flex items-center justify-between py-3 border-t border-[color:var(--tab-options-card-border)]",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-[var(--tab-options-text)]",children:"é»˜è®¤åˆ›å»ºå¿«ç…§"}),t.jsx("p",{className:"mt-1 text-xs text-[var(--tab-options-text-muted)]",children:"ä¿å­˜æ—¶æ˜¯å¦åˆ›å»ºç½‘é¡µå¿«ç…§ã€‚"})]}),t.jsx("button",{type:"button",role:"switch","aria-checked":e.defaultCreateSnapshot,onClick:()=>o({...e,defaultCreateSnapshot:!e.defaultCreateSnapshot}),className:"relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-[var(--tab-options-button-primary-bg)] focus:ring-offset-2 "+(e.defaultCreateSnapshot?"bg-[var(--tab-options-button-primary-bg)]":"bg-[var(--tab-options-button-hover-bg)]"),children:t.jsx("span",{className:"pointer-events-none inline-block h-5 w-5 transform rounded-full bg-[var(--tab-options-switch-thumb)] shadow ring-0 transition duration-200 ease-in-out "+(e.defaultCreateSnapshot?"translate-x-5":"translate-x-0")})})]})]})]})]})]})}function I({stats:e,handleSync:o,isLoading:a,formatDate:s}){return t.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-[color:var(--tab-options-card-border)] bg-[color:var(--tab-options-card-bg)] shadow-sm backdrop-blur transition-shadow hover:shadow-lg",children:[t.jsx("div",{className:"absolute inset-x-0 top-0 h-1 bg-gradient-to-r from-[var(--tab-options-modal-topbar-from)] via-[var(--tab-options-modal-topbar-via)] to-[var(--tab-options-modal-topbar-to)]"}),t.jsxs("div",{className:"p-6 pt-10 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-[var(--tab-options-title)]",children:"ç¼“å­˜çŠ¶æ€"}),t.jsx("p",{className:"mt-2 text-sm text-[var(--tab-options-text)]",children:"æŸ¥çœ‹æœ¬åœ°ç¼“å­˜æ¦‚å†µå¹¶æ‰‹åŠ¨è§¦å‘ä¸€æ¬¡åŒæ­¥ã€‚"})]}),t.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[t.jsxs("div",{className:"rounded-xl border border-[color:var(--tab-options-card-border)] bg-[color:var(--tab-options-tag-bg)] p-4 text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-[var(--tab-options-pill-text)]",children:e.tags}),t.jsx("p",{className:"mt-1 text-xs uppercase tracking-wide text-[var(--tab-options-text-muted)]",children:"æ ‡ç­¾æ•°"})]}),t.jsxs("div",{className:"rounded-xl border border-[color:var(--tab-options-card-border)] bg-[color:var(--tab-options-tag-bg)] p-4 text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-[var(--tab-options-pill-text)]",children:e.bookmarks}),t.jsx("p",{className:"mt-1 text-xs uppercase tracking-wide text-[var(--tab-options-text-muted)]",children:"ä¹¦ç­¾æ•°"})]}),t.jsxs("div",{className:"rounded-xl border border-[color:var(--tab-options-card-border)] bg-[color:var(--tab-options-tag-bg)] p-4 text-center",children:[t.jsx("p",{className:"text-xs font-medium text-[var(--tab-options-text)]",children:s(e.lastSync)}),t.jsx("p",{className:"mt-1 text-xs uppercase tracking-wide text-[var(--tab-options-text-muted)]",children:"ä¸Šæ¬¡åŒæ­¥"})]})]}),t.jsx("button",{onClick:o,disabled:a,className:"w-full px-4 py-3 bg-[var(--tab-options-button-primary-bg)] hover:bg-[var(--tab-options-button-primary-hover)] text-[var(--tab-options-button-primary-text)] rounded-lg font-medium disabled:opacity-60 disabled:cursor-not-allowed flex items-center justify-center gap-2 transition-colors",children:a?t.jsxs(t.Fragment,{children:[t.jsx(r,{}),t.jsx("span",{children:"åŒæ­¥ä¸­..."})]}):"ç«‹å³åŒæ­¥"})]})]})}function T({isOpen:e,presetLabel:o,presetError:a,isSaving:r,onClose:s,onConfirm:n,onChangeLabel:i}){return e?t.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-[color:var(--tab-options-modal-overlay)] backdrop-blur-sm px-4",children:t.jsxs("div",{className:"relative w-full max-w-md overflow-hidden rounded-2xl border border-[color:var(--tab-options-modal-border)] bg-[color:var(--tab-options-modal-bg)] shadow-xl",children:[t.jsx("div",{className:"absolute inset-x-0 top-0 h-1 bg-gradient-to-r from-[var(--tab-options-modal-topbar-from)] via-[var(--tab-options-modal-topbar-via)] to-[var(--tab-options-modal-topbar-to)]"}),t.jsxs("div",{className:"p-6 pt-10 space-y-6",children:[t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-[var(--tab-options-title)]",children:"ä¿å­˜å½“å‰é…ç½®"}),t.jsx("p",{className:"mt-1 text-sm text-[var(--tab-options-text)]",children:"ä¸ºå½“å‰ AI è®¾ç½®è¾“å…¥ä¸€ä¸ªæ˜“è®°çš„åç§°ã€‚"})]}),t.jsx("button",{type:"button",onClick:s,className:"rounded-full border border-transparent px-3 py-1 text-xl leading-none text-[var(--tab-options-modal-close-text)] transition-colors hover:border-[var(--tab-options-modal-close-hover-border)] hover:text-[var(--tab-options-modal-close-hover-text)]","aria-label":"å…³é—­",children:"Ã—"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-[var(--tab-options-text)]",children:"é…ç½®åç§°"}),t.jsx("input",{type:"text",value:o,onChange:t=>i(t.target.value),autoFocus:!0,className:"w-full rounded-lg border border-[color:var(--tab-options-button-border)] bg-[color:var(--tab-options-card-bg)] px-3 py-2 text-[var(--tab-options-title)] focus:outline-none focus:ring-2 focus:ring-[var(--tab-options-button-primary-bg)]",placeholder:"ä¾‹å¦‚ï¼šç”Ÿäº§çŽ¯å¢ƒé…ç½®"})]}),a&&t.jsx("div",{className:"rounded-lg border border-[color:var(--tab-options-danger-border)] bg-[color:var(--tab-options-danger-bg)] px-3 py-2 text-sm text-[var(--tab-options-danger-text)]",children:a}),t.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[t.jsx("button",{type:"button",onClick:s,disabled:r,className:"rounded-lg border border-[color:var(--tab-options-button-border)] px-4 py-2 text-sm font-medium text-[var(--tab-options-button-text)] transition-colors hover:bg-[var(--tab-options-button-hover-bg)] disabled:cursor-not-allowed disabled:opacity-60",children:"å–æ¶ˆ"}),t.jsx("button",{type:"button",onClick:n,disabled:r,className:"rounded-lg bg-[var(--tab-options-button-primary-bg)] px-4 py-2 text-sm font-medium text-[var(--tab-options-button-primary-text)] shadow-sm transition-colors hover:bg-[var(--tab-options-button-primary-hover)] disabled:cursor-not-allowed disabled:opacity-60",children:r?"ä¿å­˜ä¸­...":"ç¡®è®¤ä¿å­˜"})]})]})]})}):null}function M({formData:e,setFormData:o,setSuccessMessage:a}){return t.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-[color:var(--tab-options-card-border)] bg-[color:var(--tab-options-card-bg)] shadow-sm backdrop-blur transition-shadow hover:shadow-lg",children:[t.jsx("div",{className:"absolute inset-x-0 top-0 h-1 bg-gradient-to-r from-[var(--tab-options-modal-topbar-from)] via-[var(--tab-options-modal-topbar-via)] to-[var(--tab-options-modal-topbar-to)]"}),t.jsxs("div",{className:"p-6 pt-10 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-[var(--tab-options-title)]",children:"TMarks æ ‡ç­¾æŽ¨è"}),t.jsx("p",{className:"mt-2 text-sm text-[var(--tab-options-text)]",children:"é…ç½® TMarks ä¾§çš„æ ‡ç­¾æŽ¨èï¼ˆä¿å­˜ä¹¦ç­¾æ—¶ç”Ÿæˆæ ‡ç­¾ï¼‰ã€‚"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-[var(--tab-options-text)]",children:"å¯ç”¨ AI æ ‡ç­¾æŽ¨è"}),t.jsx("p",{className:"mt-1 text-xs text-[var(--tab-options-text-muted)]",children:"å¯ç”¨åŽï¼Œä¿å­˜ä¹¦ç­¾æ—¶è‡ªåŠ¨è°ƒç”¨ AI åˆ†æžé¡µé¢å¹¶æŽ¨èæ ‡ç­¾ã€‚"})]}),t.jsx("button",{type:"button",role:"switch","aria-checked":e.enableAI,onClick:()=>o({...e,enableAI:!e.enableAI}),className:"relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-[var(--tab-options-button-primary-bg)] focus:ring-offset-2 "+(e.enableAI?"bg-[var(--tab-options-button-primary-bg)]":"bg-[var(--tab-options-button-hover-bg)]"),children:t.jsx("span",{className:"pointer-events-none inline-block h-5 w-5 transform rounded-full bg-[var(--tab-options-switch-thumb)] shadow ring-0 transition duration-200 ease-in-out "+(e.enableAI?"translate-x-5":"translate-x-0")})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-[var(--tab-options-text)] mb-3",children:"æœ€å¤§æŽ¨èæ ‡ç­¾æ•°"}),t.jsx("input",{type:"number",min:"1",max:"10",value:e.maxSuggestedTags,onChange:t=>o({...e,maxSuggestedTags:parseInt(t.target.value)}),disabled:!e.enableAI,className:"w-full px-3 py-2 border border-[color:var(--tab-options-button-border)] rounded-lg bg-[color:var(--tab-options-card-bg)] text-[var(--tab-options-title)] focus:outline-none focus:ring-2 focus:ring-[var(--tab-options-button-primary-bg)] disabled:opacity-60"}),t.jsx("p",{className:"mt-2 text-xs text-[var(--tab-options-text-muted)]",children:"èŒƒå›´ 1-10ã€‚"})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("label",{className:"block text-sm font-medium text-[var(--tab-options-text)]",children:"TMarks æ ‡ç­¾ Prompt"}),t.jsx("button",{type:"button",onClick:()=>o({...e,enableCustomPrompt:!e.enableCustomPrompt}),disabled:!e.enableAI,className:"px-3 py-1 rounded-lg text-xs font-medium transition-colors "+(e.enableAI&&e.enableCustomPrompt?"bg-[var(--tab-options-button-primary-bg)] text-[var(--tab-options-button-primary-text)] hover:bg-[var(--tab-options-button-primary-hover)]":"bg-[var(--tab-options-button-hover-bg)] text-[var(--tab-options-button-text)] hover:bg-[color:var(--tab-options-button-border)]"),children:e.enableCustomPrompt?"å·²å¯ç”¨":"å·²ç¦ç”¨"})]}),e.enableAI&&e.enableCustomPrompt&&t.jsxs("div",{className:"space-y-3",children:[t.jsx("textarea",{value:e.customPrompt,onChange:t=>o({...e,customPrompt:t.target.value}),rows:10,className:"w-full px-3 py-2 border border-[color:var(--tab-options-button-border)] rounded-lg bg-[color:var(--tab-options-card-bg)] text-[var(--tab-options-title)] focus:outline-none focus:ring-2 focus:ring-[var(--tab-options-button-primary-bg)] font-mono text-xs",placeholder:"è‡ªå®šä¹‰ AI æç¤ºè¯..."}),t.jsxs("div",{className:"p-3 bg-[color:var(--tab-options-tag-bg)] rounded-lg",children:[t.jsx("p",{className:"text-xs font-medium text-[var(--tab-options-pill-text)] mb-1",children:"ðŸ’¡ ä¸“ä¸šç¤ºä¾‹ Promptï¼š"}),t.jsx("pre",{className:"text-xs text-[var(--tab-options-text-muted)] whitespace-pre-wrap max-h-32 overflow-y-auto",children:x}),t.jsxs("div",{className:"mt-2 flex gap-2",children:[t.jsx("button",{type:"button",onClick:()=>{o({...e,customPrompt:x})},className:"text-xs px-2 py-1 bg-[var(--tab-options-button-primary-bg)] hover:bg-[var(--tab-options-button-primary-hover)] text-[var(--tab-options-button-primary-text)] rounded-md transition-colors duration-200",children:"ä½¿ç”¨æ­¤ç¤ºä¾‹"}),t.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(x).then(()=>{a("ç¤ºä¾‹ Prompt å·²å¤åˆ¶åˆ°å‰ªè´´æ¿"),setTimeout(()=>a(null),2e3)})},className:"text-xs px-2 py-1 bg-[var(--tab-options-button-primary-bg)] hover:bg-[var(--tab-options-button-primary-hover)] text-[var(--tab-options-button-primary-text)] rounded-md transition-colors duration-200",children:"å¤åˆ¶ç¤ºä¾‹"})]})]})]})]})]})]})]})}function E({formData:o,setFormData:a,setSuccessMessage:r}){const[s,n]=e.useState(!1),[i,l]=e.useState(null),[d,b]=e.useState([]),[c,p]=e.useState(!1),[m,x]=e.useState(null);return t.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-[color:var(--tab-options-card-border)] bg-[color:var(--tab-options-card-bg)] shadow-sm backdrop-blur transition-shadow hover:shadow-lg",children:[t.jsx("div",{className:"absolute inset-x-0 top-0 h-1 bg-gradient-to-r from-[var(--tab-options-modal-topbar-from)] via-[var(--tab-options-modal-topbar-via)] to-[var(--tab-options-modal-topbar-to)]"}),t.jsxs("div",{className:"p-6 pt-10 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-[var(--tab-options-title)]",children:"NewTab æ–‡ä»¶å¤¹æŽ¨è"}),t.jsx("p",{className:"mt-2 text-sm text-[var(--tab-options-text)]",children:"é…ç½® Popupã€Œä¿å­˜åˆ° NewTabã€çš„æ–‡ä»¶å¤¹ AI æŽ¨èã€‚"}),t.jsx("p",{className:"mt-2 text-xs text-[var(--tab-options-text-muted)]",children:"NewTab æ ¹ç›®å½•å›ºå®šä¸ºæµè§ˆå™¨ä¹¦ç­¾æ ä¸‹çš„æ–‡ä»¶å¤¹ï¼šTmakrsã€‚"}),t.jsx("p",{className:"mt-1 text-xs text-[var(--tab-options-text-muted)]",children:"åŽç»­â€œAI æ•´ç†â€ä¼šåœ¨è¯¥æ ¹ç›®å½•èŒƒå›´å†…åˆ›å»ºå¤‡ä»½å¹¶å¤åˆ¶ç”Ÿæˆæ•´ç†åŽçš„ä¹¦ç­¾ç»“æž„ï¼ˆå¯é€šè¿‡ä¸‹æ–¹â€œAI åˆ†ç±»èŒƒå›´â€è°ƒæ•´ï¼‰ã€‚"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-[var(--tab-options-text)]",children:"å¯ç”¨ NewTab æ–‡ä»¶å¤¹ AI æŽ¨è"}),t.jsx("p",{className:"mt-1 text-xs text-[var(--tab-options-text-muted)]",children:"å¯ç”¨åŽï¼Œä¿å­˜åˆ° NewTab æ—¶å¯ä½¿ç”¨ AI æŽ¨èæ–‡ä»¶å¤¹ã€‚"})]}),t.jsx("button",{type:"button",role:"switch","aria-checked":o.enableNewtabAI,onClick:()=>a({...o,enableNewtabAI:!o.enableNewtabAI}),className:"relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-[var(--tab-options-button-primary-bg)] focus:ring-offset-2 "+(o.enableNewtabAI?"bg-[var(--tab-options-button-primary-bg)]":"bg-[var(--tab-options-button-hover-bg)]"),children:t.jsx("span",{className:"pointer-events-none inline-block h-5 w-5 transform rounded-full bg-[var(--tab-options-switch-thumb)] shadow ring-0 transition duration-200 ease-in-out "+(o.enableNewtabAI?"translate-x-5":"translate-x-0")})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-[var(--tab-options-text)] mb-2",children:"AI åˆ†ç±»èŒƒå›´"}),t.jsxs("div",{className:"inline-flex rounded-xl border border-[color:var(--tab-options-card-border)] bg-[color:var(--tab-options-card-bg)] p-1 text-sm font-medium text-[var(--tab-options-text)]",children:[t.jsx("button",{type:"button",onClick:()=>a({...o,aiBookmarkClassifyScope:"newtab_root"}),className:"rounded-lg px-3 py-1.5 transition-colors "+("newtab_root"===o.aiBookmarkClassifyScope?"bg-[var(--tab-options-button-primary-bg)] text-[var(--tab-options-button-primary-text)] shadow":"hover:text-[var(--tab-options-title)]"),children:"ä»… NewTab æ ¹ç›®å½•"}),t.jsx("button",{type:"button",onClick:()=>a({...o,aiBookmarkClassifyScope:"bookmarks_bar"}),className:"rounded-lg px-3 py-1.5 transition-colors "+("bookmarks_bar"===o.aiBookmarkClassifyScope?"bg-[var(--tab-options-button-primary-bg)] text-[var(--tab-options-button-primary-text)] shadow":"hover:text-[var(--tab-options-title)]"),children:"ä¹¦ç­¾æ "}),t.jsx("button",{type:"button",onClick:()=>a({...o,aiBookmarkClassifyScope:"all"}),className:"rounded-lg px-3 py-1.5 transition-colors "+("all"===o.aiBookmarkClassifyScope?"bg-[var(--tab-options-button-primary-bg)] text-[var(--tab-options-button-primary-text)] shadow":"hover:text-[var(--tab-options-title)]"),children:"å…¨éƒ¨ä¹¦ç­¾"})]}),t.jsx("p",{className:"mt-2 text-xs text-[var(--tab-options-text-muted)]",children:"ç”¨äºŽåŽç»­â€œAI æ‰¹é‡æ•´ç†/åˆ†ç±»æ—¢æœ‰ä¹¦ç­¾â€åŠŸèƒ½çš„ä½œç”¨èŒƒå›´ã€‚é»˜è®¤åªå¤„ç† NewTab æ ¹ç›®å½•ã€‚"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-[var(--tab-options-text)] mb-2",children:"å¯¼å…¥æµè§ˆå™¨ä¹¦ç­¾åˆ° NewTab"}),t.jsx("p",{className:"text-xs text-[var(--tab-options-text-muted)]",children:"å°†æµè§ˆå™¨æ‰€æœ‰ä¹¦ç­¾å¤åˆ¶åˆ°â€œTmakrsâ€æ–‡ä»¶å¤¹ä¸‹çš„ä¸€ä¸ªæ–°å­æ–‡ä»¶å¤¹ä¸­ï¼Œä¾¿äºŽåŽç»­ AI æ•´ç†ã€‚ä¸ä¼šä¿®æ”¹åŽŸå§‹ä¹¦ç­¾ã€‚"}),t.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[t.jsx("button",{type:"button",onClick:async()=>{try{if(x(null),!chrome?.runtime?.sendMessage)throw new Error("å½“å‰çŽ¯å¢ƒä¸æ”¯æŒ chrome.runtime");if(!window.confirm("å°†å¤åˆ¶æµè§ˆå™¨æ‰€æœ‰ä¹¦ç­¾åˆ°â€œTmakrsâ€æ–‡ä»¶å¤¹ä¸‹ï¼ˆä¸ä¼šä¿®æ”¹åŽŸå§‹ä¹¦ç­¾ï¼‰ã€‚ç¡®å®šç»§ç»­ï¼Ÿ"))return;p(!0);const t=await chrome.runtime.sendMessage({type:"IMPORT_ALL_BOOKMARKS_TO_NEWTAB"});if(!t?.success)throw new Error(t?.error||"å¯¼å…¥å¤±è´¥");const e=t.data?.counts?.folders??0,o=t.data?.counts?.bookmarks??0;r(`å¯¼å…¥å®Œæˆï¼šæ–‡ä»¶å¤¹ ${e} ä¸ªï¼Œä¹¦ç­¾ ${o} ä¸ª`),setTimeout(()=>r(null),2500)}catch(t){x(t instanceof Error?t.message:"å¯¼å…¥å¤±è´¥")}finally{p(!1)}},disabled:c,className:"px-3 py-2 rounded-lg text-sm font-medium bg-[var(--tab-options-button-primary-bg)] hover:bg-[var(--tab-options-button-primary-hover)] text-[var(--tab-options-button-primary-text)] disabled:opacity-60",children:c?"å¯¼å…¥ä¸­...":"ä¸€é”®å¯¼å…¥å…¨éƒ¨ä¹¦ç­¾"}),m&&t.jsx("div",{className:"text-xs text-red-500",children:m})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-[var(--tab-options-text)] mb-3",children:"æœ€å¤§æŽ¨èæ–‡ä»¶å¤¹æ•°"}),t.jsx("input",{type:"number",min:"1",max:"20",value:o.newtabFolderRecommendCount??10,onChange:t=>a({...o,newtabFolderRecommendCount:parseInt(t.target.value)||10}),disabled:!o.enableNewtabAI,className:"w-full px-3 py-2 border border-[color:var(--tab-options-button-border)] rounded-lg bg-[color:var(--tab-options-card-bg)] text-[var(--tab-options-title)] focus:outline-none focus:ring-2 focus:ring-[var(--tab-options-button-primary-bg)] disabled:opacity-60"}),t.jsx("p",{className:"mt-2 text-xs text-[var(--tab-options-text-muted)]",children:"èŒƒå›´ 1-20ã€‚"})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("label",{className:"block text-sm font-medium text-[var(--tab-options-text)]",children:"NewTab æ–‡ä»¶å¤¹çº§ Prompt"}),t.jsx("button",{type:"button",onClick:()=>a({...o,enableNewtabFolderPrompt:!o.enableNewtabFolderPrompt}),disabled:!o.enableNewtabAI,className:"px-3 py-1 rounded-lg text-xs font-medium transition-colors "+(o.enableNewtabAI&&o.enableNewtabFolderPrompt?"bg-[var(--tab-options-button-primary-bg)] text-[var(--tab-options-button-primary-text)] hover:bg-[var(--tab-options-button-primary-hover)]":"bg-[var(--tab-options-button-hover-bg)] text-[var(--tab-options-button-text)] hover:bg-[color:var(--tab-options-button-border)]"),children:o.enableNewtabFolderPrompt?"å·²å¯ç”¨":"å·²ç¦ç”¨"})]}),t.jsx("p",{className:"mt-1 text-xs text-[var(--tab-options-text-muted)]",children:"ç”¨äºŽâ€œæ–‡ä»¶å¤¹çº§åˆ«â€çš„ä¿å­˜ä½ç½®æŽ¨èï¼šAI åªèƒ½ä»Žå€™é€‰æ–‡ä»¶å¤¹è·¯å¾„åˆ—è¡¨ä¸­é€‰æ‹©ï¼Œä¸ä¼šç”Ÿæˆæ ‡ç­¾ã€‚"}),o.enableNewtabAI&&o.enableNewtabFolderPrompt&&t.jsxs("div",{className:"space-y-3",children:[t.jsx("textarea",{value:o.newtabFolderPrompt,onChange:t=>a({...o,newtabFolderPrompt:t.target.value}),rows:10,className:"w-full px-3 py-2 border border-[color:var(--tab-options-button-border)] rounded-lg bg-[color:var(--tab-options-card-bg)] text-[var(--tab-options-title)] focus:outline-none focus:ring-2 focus:ring-[var(--tab-options-button-primary-bg)] font-mono text-xs",placeholder:"å¯ç”¨å˜é‡ï¼š{{title}} {{url}} {{description}} {{recommendCount}} {{folderPaths}}"}),t.jsxs("div",{className:"rounded-lg border border-[color:var(--tab-options-card-border)] bg-[color:var(--tab-options-card-bg)] p-3 space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between gap-2",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-[var(--tab-options-title)]",children:"å€™é€‰è·¯å¾„é¢„è§ˆ"}),t.jsx("div",{className:"mt-1 text-xs text-[var(--tab-options-text-muted)]",children:"è·¯å¾„æ ¼å¼ç¤ºä¾‹ï¼šTmakrs/é‚®ç®±/å›½å¤–/ä¸´æ—¶é‚®ç®±"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{type:"button",onClick:async()=>{try{if(n(!0),l(null),!chrome?.runtime?.sendMessage)throw new Error("å½“å‰çŽ¯å¢ƒä¸æ”¯æŒ chrome.runtime");const t=await chrome.runtime.sendMessage({type:"GET_NEWTAB_FOLDERS"});if(!t?.success)throw new Error(t?.error||"åŠ è½½å€™é€‰è·¯å¾„å¤±è´¥");const e=(t.data?.folders||[]).filter(e=>e.id!==t.data?.rootId).map(t=>t.path).filter(Boolean);b(e)}catch(t){l(t instanceof Error?t.message:"åŠ è½½å€™é€‰è·¯å¾„å¤±è´¥"),b([])}finally{n(!1)}},disabled:s,className:"text-xs px-2 py-1 bg-[var(--tab-options-button-hover-bg)] hover:bg-[color:var(--tab-options-button-border)] text-[var(--tab-options-button-text)] rounded-md transition-colors duration-200 disabled:opacity-60",children:s?"åŠ è½½ä¸­...":d.length>0?"åˆ·æ–°":"åŠ è½½"}),t.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(d.join("\n")).then(()=>{r("å€™é€‰è·¯å¾„å·²å¤åˆ¶åˆ°å‰ªè´´æ¿"),setTimeout(()=>r(null),2e3)})},disabled:0===d.length,className:"text-xs px-2 py-1 bg-[var(--tab-options-button-primary-bg)] hover:bg-[var(--tab-options-button-primary-hover)] text-[var(--tab-options-button-primary-text)] rounded-md transition-colors duration-200 disabled:opacity-60",children:"å¤åˆ¶è·¯å¾„"})]})]}),i&&t.jsx("div",{className:"text-xs text-red-500",children:i}),d.length>0?t.jsx("pre",{className:"text-xs text-[var(--tab-options-text-muted)] whitespace-pre-wrap max-h-40 overflow-y-auto",children:d.join("\n")}):t.jsx("div",{className:"text-xs text-[var(--tab-options-text-muted)]",children:"å°šæœªåŠ è½½å€™é€‰è·¯å¾„ã€‚"})]}),t.jsxs("div",{className:"p-3 bg-[color:var(--tab-options-tag-bg)] rounded-lg",children:[t.jsx("p",{className:"text-xs font-medium text-[var(--tab-options-pill-text)] mb-1",children:"ðŸ’¡ ä¸“ä¸šç¤ºä¾‹ Promptï¼š"}),t.jsx("pre",{className:"text-xs text-[var(--tab-options-text-muted)] whitespace-pre-wrap max-h-32 overflow-y-auto",children:u}),t.jsxs("div",{className:"mt-2 flex gap-2",children:[t.jsx("button",{type:"button",onClick:()=>a({...o,newtabFolderPrompt:u}),className:"text-xs px-2 py-1 bg-[var(--tab-options-button-primary-bg)] hover:bg-[var(--tab-options-button-primary-hover)] text-[var(--tab-options-button-primary-text)] rounded-md transition-colors duration-200",children:"ä½¿ç”¨æ­¤ç¤ºä¾‹"}),t.jsx("button",{type:"button",onClick:()=>a({...o,newtabFolderPrompt:v}),className:"text-xs px-2 py-1 bg-[var(--tab-options-button-primary-bg)] hover:bg-[var(--tab-options-button-primary-hover)] text-[var(--tab-options-button-primary-text)] rounded-md transition-colors duration-200",children:"ä½¿ç”¨ç¤ºä¾‹ 2"}),t.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(u).then(()=>{r("ç¤ºä¾‹ Prompt å·²å¤åˆ¶åˆ°å‰ªè´´æ¿"),setTimeout(()=>r(null),2e3)})},className:"text-xs px-2 py-1 bg-[var(--tab-options-button-primary-bg)] hover:bg-[var(--tab-options-button-primary-hover)] text-[var(--tab-options-button-primary-text)] rounded-md transition-colors duration-200",children:"å¤åˆ¶ç¤ºä¾‹"})]})]})]})]})]})]})]})}const F={openai:p.OPENAI,deepseek:p.DEEPSEEK,siliconflow:p.SILICONFLOW},K=new Set(["openai","deepseek","siliconflow","custom"]),D=t=>{const e=t.trim();return e?e.replace(/\s+/g,"").replace(/\/chat\/completions$/,"").replace(/\/$/,""):e},U=(t,e)=>{if(!K.has(t))return!1;if("custom"===t){const t=e?.trim();return Boolean(t&&/^https?:\/\//.test(t))}return!0};async function L(t,e,o){if(!K.has(t))throw new Error("å½“å‰ AI æœåŠ¡æš‚ä¸æ”¯æŒè‡ªåŠ¨èŽ·å–æ¨¡åž‹åˆ—è¡¨");if(!e.trim())throw new Error("ç¼ºå°‘ API Key");const a=((t,e)=>{if(e&&e.trim())return D(e);const o=F[t];return o?D(o):void 0})(t,o);if(!a)throw new Error("ç¼ºå°‘ API åœ°å€");return(async(t,e)=>{const o=`${t}/models`,a=await fetch(o,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!a.ok){const t=await a.text();throw new Error(`èŽ·å–æ¨¡åž‹åˆ—è¡¨å¤±è´¥ (${a.status}): ${t||a.statusText}`)}const r=await a.json();if(!Array.isArray(r?.data))throw new Error("æ¨¡åž‹åˆ—è¡¨å“åº”æ ¼å¼æ— æ•ˆ");const s=r.data.map(t=>{if(t&&"object"==typeof t&&"id"in t)return t.id}).filter(t=>"string"==typeof t&&t.length>0);if(0===s.length)throw new Error("æ¨¡åž‹åˆ—è¡¨ä¸ºç©º");return s})(a,e)}function O(){const{config:t,loadConfig:o,saveConfig:a,syncCache:r,error:d,successMessage:b,isLoading:c,setError:p,setSuccessMessage:m}=s(),[u,v]=e.useState({theme:"auto",themeStyle:"default",aiProvider:"openai",apiKey:"",apiUrl:"",aiModel:"",bookmarkApiUrl:"",bookmarkApiKey:"",enableCustomPrompt:!1,customPrompt:x,maxSuggestedTags:5,defaultVisibility:"public",enableAI:!0,aiBookmarkClassifyScope:"newtab_root",defaultIncludeThumbnail:!0,defaultCreateSnapshot:!1,tagTheme:"classic",newtabFolderRecommendCount:10,enableNewtabAI:!0,enableNewtabFolderPrompt:!1,newtabFolderPrompt:""}),[f,y]=e.useState({tags:0,bookmarks:0,lastSync:0}),[j,N]=e.useState(!1),[w,k]=e.useState([]),[C,S]=e.useState(!1),[P,A]=e.useState(null),[I,T]=e.useState(0),M=e.useRef(null),[E,F]=e.useState({}),[K,D]=e.useState(!1),[O,B]=e.useState(""),[R,_]=e.useState(!1),[$,V]=e.useState(null),z=()=>`${Date.now()}-${Math.random().toString(16).slice(2,10)}`;e.useEffect(()=>{(async()=>{await o();const t=await g.getStats();y(t)})()},[]),e.useEffect(()=>(n(u.theme),i(()=>u.theme)),[u.theme]),e.useEffect(()=>{l(u.themeStyle)},[u.themeStyle]),e.useEffect(()=>{if(!t)return;const e=t.aiConfig.provider,o=t.aiConfig.apiKeys[e]||"",a=t.aiConfig.apiUrls?.[e]||"";v(r=>({...r,theme:t.preferences.theme??"auto",themeStyle:t.preferences.themeStyle??"default",aiProvider:e,apiKey:o,apiUrl:a,aiModel:t.aiConfig.model||"",bookmarkApiUrl:t.bookmarkSite.apiUrl,bookmarkApiKey:t.bookmarkSite.apiKey,enableCustomPrompt:t.aiConfig.enableCustomPrompt||!1,customPrompt:t.aiConfig.customPrompt||r.customPrompt,maxSuggestedTags:t.preferences.maxSuggestedTags,defaultVisibility:t.preferences.defaultVisibility,enableAI:t.preferences.enableAI??!0,aiBookmarkClassifyScope:t.preferences.aiBookmarkClassifyScope??"newtab_root",defaultIncludeThumbnail:t.preferences.defaultIncludeThumbnail??!0,defaultCreateSnapshot:t.preferences.defaultCreateSnapshot??!1,tagTheme:t.preferences.tagTheme??"classic",newtabFolderRecommendCount:Math.min(20,Math.max(1,Number(t.preferences.newtabFolderRecommendCount??10))),enableNewtabAI:t.preferences.enableNewtabAI??!0,enableNewtabFolderPrompt:t.preferences.enableNewtabFolderPrompt??!1,newtabFolderPrompt:t.preferences.newtabFolderPrompt??""}));const r=(t=>{const e={};return t?(Object.keys(t).forEach(o=>{const a=t[o]||[];e[o]=Array.isArray(a)?a.slice(0,10).map(t=>({...t,provider:t.provider||o,id:t.id||z()})):[]}),e):e})(t.aiConfig.savedConnections);F(r)},[t]);e.useEffect(()=>{const t=U(u.aiProvider,u.apiUrl),e=u.apiKey.trim();if(!t||!e)return k([]),A(null),S(!1),void(M.current=null);const o=`${u.aiProvider}|${(u.apiUrl||"").trim()}|${e}|${I}`;if(M.current===o)return;let a=!1;return(async()=>{S(!0),A(null);try{const t=await L(u.aiProvider,e,u.apiUrl);if(a)return;k(t),S(!1),A(null),M.current=o,v(e=>e.aiModel?e:{...e,aiModel:t[0]||""})}catch(t){if(a)return;k([]),A(t instanceof Error?t.message:String(t)),S(!1),M.current=o}})(),()=>{a=!0}},[u.aiProvider,u.apiUrl,u.apiKey,I]);const W=e.useMemo(()=>Object.entries(E).flatMap(([t,e])=>(e||[]).map(e=>({...e,provider:e.provider||t}))),[E]),G=U(u.aiProvider,u.apiUrl);return{config:t,error:d,successMessage:b,isLoading:c,setError:p,setSuccessMessage:m,formData:u,setFormData:v,stats:f,isTesting:j,availableModels:w,isFetchingModels:C,modelFetchError:P,modelFetchSupported:G,savedConnections:E,allSavedConnections:W,isPresetModalOpen:K,presetLabel:O,isSavingPreset:R,presetError:$,setPresetLabel:B,handleProviderChange:e=>{const o=t?.aiConfig.apiKeys[e]||"",a=t?.aiConfig.apiUrls?.[e]||"";v(t=>({...t,aiProvider:e,apiKey:o,apiUrl:a})),k([]),A(null),M.current=null},refreshModelOptions:()=>{U(u.aiProvider,u.apiUrl)&&u.apiKey.trim()&&(M.current=null,T(t=>t+1))},handleSave:async()=>{try{await a({aiConfig:{provider:u.aiProvider,apiKeys:{...t?.aiConfig.apiKeys,[u.aiProvider]:u.apiKey},apiUrls:{...t?.aiConfig.apiUrls,[u.aiProvider]:u.apiUrl},model:u.aiModel,enableCustomPrompt:u.enableCustomPrompt,customPrompt:u.customPrompt,savedConnections:E},bookmarkSite:{apiUrl:u.bookmarkApiUrl,apiKey:u.bookmarkApiKey},preferences:{theme:u.theme,themeStyle:u.themeStyle,autoSync:t?.preferences.autoSync??!0,syncInterval:t?.preferences.syncInterval??24,maxSuggestedTags:u.maxSuggestedTags,defaultVisibility:u.defaultVisibility,enableAI:u.enableAI,aiBookmarkClassifyScope:u.aiBookmarkClassifyScope,defaultIncludeThumbnail:u.defaultIncludeThumbnail,defaultCreateSnapshot:u.defaultCreateSnapshot,tagTheme:u.tagTheme,newtabFolderRecommendCount:Math.min(20,Math.max(1,Number(u.newtabFolderRecommendCount??10))),enableNewtabAI:u.enableNewtabAI,enableNewtabFolderPrompt:u.enableNewtabFolderPrompt,newtabFolderPrompt:u.newtabFolderPrompt}}),m("è®¾ç½®å·²ä¿å­˜!"),setTimeout(()=>m(null),2e3)}catch(e){p(e instanceof Error?e.message:"ä¿å­˜å¤±è´¥")}},handleSync:async()=>{try{await r();const t=await g.getStats();y(t)}catch(t){p(t instanceof Error?t.message:"åŒæ­¥å¤±è´¥")}},handleTestAPI:async()=>{try{N(!0),p(null);const{getAIProvider:t}=await h(async()=>{const{getAIProvider:t}=await import("./index-7RnQ6Fxb.js").then(t=>t.i);return{getAIProvider:t}},__vite__mapDeps([0,1,2])),e=t(u.aiProvider),o={page:{title:"Claude Code - AI ç¼–ç¨‹åŠ©æ‰‹",url:"https://claude.ai",description:"Claude æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ AI ç¼–ç¨‹åŠ©æ‰‹",content:"Claude Code æ˜¯ Anthropic æŽ¨å‡ºçš„æ™ºèƒ½ç¼–ç¨‹å·¥å…·ï¼Œæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€å’Œæ¡†æž¶ã€‚"},context:{existingTags:["å¼€å‘å·¥å…·","AI","ç¼–ç¨‹","æ•ˆçŽ‡"],recentBookmarks:[]},options:{maxTags:3,preferExisting:!0}},a=await e.generateTags(o,u.apiKey,u.aiModel||void 0,u.apiUrl||void 0,u.enableCustomPrompt?u.customPrompt:void 0);m(`API æµ‹è¯•æˆåŠŸï¼è¿”å›ž ${a.suggestedTags.length} ä¸ªæ ‡ç­¾ï¼š${a.suggestedTags.map(t=>t.name).join(", ")}`),setTimeout(()=>m(null),5e3)}catch(t){p(t instanceof Error?t.message:"API æµ‹è¯•å¤±è´¥")}finally{N(!1)}},formatDate:t=>t?new Date(t).toLocaleString("zh-CN"):"ä»ŽæœªåŒæ­¥",handleReset:()=>{confirm("ç¡®å®šè¦é‡ç½®æ‰€æœ‰è®¾ç½®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚")&&(v({theme:"auto",themeStyle:"default",aiProvider:"openai",apiKey:"",apiUrl:"",aiModel:"",bookmarkApiUrl:"",bookmarkApiKey:"",enableCustomPrompt:!1,customPrompt:x,maxSuggestedTags:5,defaultVisibility:"public",enableAI:!0,aiBookmarkClassifyScope:"newtab_root",defaultIncludeThumbnail:!0,defaultCreateSnapshot:!1,tagTheme:"classic",newtabFolderRecommendCount:10,enableNewtabAI:!0,enableNewtabFolderPrompt:!1,newtabFolderPrompt:""}),m("è®¾ç½®å·²é‡ç½®"),setTimeout(()=>m(null),2e3))},handleSaveConnectionPreset:()=>{if(!u.apiKey.trim())return void p("è¯·å…ˆå¡«å†™ API Key å†ä¿å­˜é…ç½®");const t=`é…ç½® ${(E[u.aiProvider]?.length||0)+1}`;B(t),V(null),D(!0)},handleConfirmSaveConnectionPreset:async()=>{const e=u.apiKey.trim();if(!e)return void V("è¯·å…ˆå¡«å†™ API Key å†ä¿å­˜é…ç½®");const o=O.trim();if(!o)return void V("é…ç½®åç§°ä¸èƒ½ä¸ºç©º");if(!t)return p("é…ç½®å°šæœªåŠ è½½ï¼Œç¨åŽå†è¯•"),void D(!1);_(!0),V(null);const r={apiUrl:u.apiUrl,apiKey:e,model:u.aiModel,label:o,provider:u.aiProvider},s=E,n=((t,e,o)=>{const a=t[e]||[],r=(o.apiUrl||"").trim(),s=(o.apiKey||"").trim(),n=(o.model||"").trim(),i={...o,apiUrl:r||void 0,apiKey:s||void 0,model:n||void 0,provider:e,label:o.label?.trim()||o.label,lastUsedAt:Date.now(),id:o.id||z()},l=Boolean(o.id),d=l?a.findIndex(t=>t.id&&t.id===o.id):-1;let b;return l&&d>=0?(b=[...a],b[d]=i):b=[i,...a].slice(0,10),{...t,[e]:b}})(s,u.aiProvider,r);F(n);try{await a({aiConfig:{...t.aiConfig,savedConnections:n}}),m(`å·²ä¿å­˜ä¸ºã€Œ${o}ã€`),setTimeout(()=>m(null),2e3),D(!1)}catch(i){F(s),V(i instanceof Error?i.message:"ä¿å­˜é…ç½®å¤±è´¥")}finally{_(!1)}},handleClosePresetModal:()=>{R||(D(!1),V(null))},handleApplySavedConnection:(t,e)=>{const o=e||t.provider||u.aiProvider;v(e=>({...e,aiProvider:o,apiUrl:t.apiUrl||"",apiKey:t.apiKey||"",aiModel:t.model||""})),o!==u.aiProvider&&(k([]),A(null),M.current=null)},handleDeleteSavedConnection:async(e,o)=>{const r=o||e.provider||u.aiProvider;if(!r)return void p("æ— æ³•ç¡®å®šé…ç½®æ‰€å±žçš„ AI å¼•æ“Ž");const s=E,n=((t,e,o)=>{const a=t[e]||[],r=(o.apiUrl||"").trim(),s=(o.apiKey||"").trim(),n=(o.model||"").trim(),i=a.filter(t=>o.id&&t.id?t.id!==o.id:(t.apiUrl||"").trim()!==r||(t.apiKey||"").trim()!==s||(t.model||"").trim()!==n),l={...t};return i.length>0?l[e]=i:delete l[e],l})(s,r,e);F(n);try{if(!t)throw new Error("é…ç½®å°šæœªåŠ è½½");await a({aiConfig:{...t.aiConfig,savedConnections:n}}),m("å·²åˆ é™¤ä¿å­˜çš„è¿žæŽ¥"),setTimeout(()=>m(null),2e3)}catch(i){F(s),p(i instanceof Error?i.message:"åˆ é™¤è¿žæŽ¥å¤±è´¥")}}}}function B(){const{error:o,successMessage:a,isLoading:r,setError:s,setSuccessMessage:n,formData:i,setFormData:l,stats:c,isTesting:p,availableModels:m,isFetchingModels:x,modelFetchError:u,modelFetchSupported:v,allSavedConnections:h,isPresetModalOpen:g,presetLabel:f,isSavingPreset:y,presetError:j,setPresetLabel:N,handleProviderChange:w,refreshModelOptions:k,handleSave:C,handleSync:F,formatDate:K,handleReset:D,handleTestAPI:U,handleSaveConnectionPreset:L,handleConfirmSaveConnectionPreset:B,handleClosePresetModal:R,handleApplySavedConnection:_,handleDeleteSavedConnection:$}=O(),[V,z]=e.useState("ai"),W=e.useMemo(()=>[{id:"ai",label:"AI é…ç½®"},{id:"tmarkstag",label:"TMarks"},{id:"newtabtag",label:"NewTab"},{id:"preferences",label:"åå¥½è®¾ç½®"},{id:"tmarks",label:"åŒæ­¥è®¾ç½®"}],[]);return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"min-h-screen w-screen bg-gradient-to-br from-[var(--tab-options-page-bg-from)] via-[var(--tab-options-page-bg-via)] to-[var(--tab-options-page-bg-to)]",children:t.jsxs("div",{className:"w-4/5 mx-auto px-6 py-12",children:[t.jsxs("div",{className:"relative overflow-hidden rounded-3xl border border-[color:var(--tab-options-card-border)] bg-[color:var(--tab-options-card-bg)] shadow-sm backdrop-blur mb-10",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[color:var(--tab-options-hero-gradient-from)] via-[color:var(--tab-options-hero-gradient-via)] to-[color:var(--tab-options-hero-gradient-to)]"}),t.jsxs("div",{className:"relative p-10",children:[t.jsx("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-[color:var(--tab-options-pill-bg)] text-sm font-medium text-[var(--tab-options-pill-text)]",children:"è®¾ç½®ä¸­å¿ƒ"}),t.jsx("h1",{className:"mt-4 text-4xl font-bold text-[var(--tab-options-title)] tracking-tight",children:"ä¸ªæ€§åŒ–ä½ çš„ä¹¦ç­¾åŠ©ç†"}),t.jsx("p",{className:"mt-3 max-w-2xl text-base text-[var(--tab-options-text)]",children:"ç®¡ç† AI æŽ¥å…¥ã€åŒæ­¥ç­–ç•¥ä¸ŽæœåŠ¡ç«¯é…ç½®ï¼Œä¸ºä½ çš„å·¥ä½œæµæ‰“é€ é¡ºæ»‘çš„çŸ¥è¯†æ”¶é›†ä½“éªŒã€‚"}),t.jsxs("div",{className:"mt-6 flex flex-wrap gap-3 text-xs font-medium text-[var(--tab-options-text-muted)]",children:[t.jsx("span",{className:"px-3 py-1 rounded-full bg-[color:var(--tab-options-tag-bg)] border border-[color:var(--tab-options-tag-border)]",children:"AI æ ‡ç­¾"}),t.jsx("span",{className:"px-3 py-1 rounded-full bg-[color:var(--tab-options-tag-bg)] border border-[color:var(--tab-options-tag-border)]",children:"å¤šç«¯åŒæ­¥"}),t.jsx("span",{className:"px-3 py-1 rounded-full bg-[color:var(--tab-options-tag-bg)] border border-[color:var(--tab-options-tag-border)]",children:"å®‰å…¨é…ç½®"})]})]})]}),t.jsxs("div",{className:"mb-10 space-y-4",children:[o&&t.jsx(d,{message:o,onDismiss:()=>s(null)}),a&&t.jsx(b,{message:a})]}),t.jsxs("div",{className:"grid gap-8 lg:grid-cols-12",children:[t.jsx("div",{className:"lg:col-span-3",children:t.jsxs("div",{className:"sticky top-8 space-y-4",children:[t.jsxs("div",{className:"rounded-2xl border border-[color:var(--tab-options-card-border)] bg-[color:var(--tab-options-card-bg)] shadow-sm backdrop-blur p-3",children:[t.jsx("div",{className:"space-y-2",children:W.map(e=>t.jsx("button",{type:"button",onClick:()=>z(e.id),className:"w-full text-left px-4 py-2 rounded-xl text-sm font-medium transition-colors "+(V===e.id?"bg-[var(--tab-options-button-primary-bg)] text-[var(--tab-options-button-primary-text)]":"text-[var(--tab-options-text)] hover:bg-[var(--tab-options-button-hover-bg)]"),children:e.label},e.id))}),t.jsxs("div",{className:"mt-4 border-t border-[color:var(--tab-options-card-border)] pt-4 space-y-3",children:[t.jsx("div",{className:"text-xs font-semibold text-[var(--tab-options-text-muted)]",children:"ä¿å­˜ä¸ŽåŒæ­¥"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("button",{type:"button",onClick:D,className:"w-full rounded-lg border border-[color:var(--tab-options-button-border)] px-3 py-2 text-sm font-medium text-[var(--tab-options-button-text)] hover:bg-[var(--tab-options-button-hover-bg)] transition-colors",children:"é‡ç½®è®¾ç½®"}),t.jsx("button",{type:"button",onClick:C,disabled:r,className:"w-full rounded-lg bg-[var(--tab-options-button-primary-bg)] px-3 py-2 text-sm font-medium text-[var(--tab-options-button-primary-text)] shadow-sm hover:bg-[var(--tab-options-button-primary-hover)] disabled:cursor-not-allowed disabled:opacity-60 transition-colors",children:r?"ä¿å­˜ä¸­...":"ä¿å­˜è®¾ç½®"})]})]})]}),t.jsx(I,{stats:c,handleSync:F,isLoading:r,formatDate:K})]})}),t.jsxs("div",{className:"lg:col-span-9 space-y-8",children:["ai"===V&&t.jsx(S,{formData:i,setFormData:l,handleProviderChange:w,handleTestConnection:U,isTesting:p,availableModels:m,isFetchingModels:x,modelFetchError:u,onRefreshModels:k,modelFetchSupported:v,allSavedConnections:h,onApplySavedConnection:_,onDeleteSavedConnection:$,onSaveConnectionPreset:L}),"tmarkstag"===V&&t.jsx(M,{formData:i,setFormData:l,setSuccessMessage:n}),"newtabtag"===V&&t.jsx(E,{formData:i,setFormData:l,setSuccessMessage:n}),"preferences"===V&&t.jsx(A,{formData:i,setFormData:l}),"tmarks"===V&&t.jsx(P,{formData:i,setFormData:l})]})]})]})}),t.jsx(T,{isOpen:g,presetLabel:f,presetError:j,isSaving:y,onClose:R,onConfirm:B,onChangeLabel:N})]})}const R=document.getElementById("root");R&&o.createRoot(R).render(t.jsx(a.StrictMode,{children:t.jsx(B,{})}));
