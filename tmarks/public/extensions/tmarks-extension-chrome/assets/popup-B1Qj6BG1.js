import{j as e,r as t,R as s,a}from"./react-DmgQkRKB.js";import{E as r,S as l,L as n,u as i}from"./SuccessMessage-pbwPRQGA.js";import{c as o,l as d}from"./index-BbZ5549T.js";import{S as c,g as x}from"./urls-CEh1Kean.js";import{g as m,c as h,a as u}from"./tab-collection-Czy9PBbd.js";import"./index-CQ_a-bOA.js";import"./index-CLpTKzGv.js";function g({tags:t,selectedTags:s,onToggle:a}){return e.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.map(t=>{const r=s.includes(t.name),l=t.isNew,n=r?l?"border border-amber-300 bg-amber-100 text-amber-700 shadow-sm":"border border-emerald-300 bg-emerald-100 text-emerald-700 shadow-sm":l?"border border-blue-300 bg-blue-100 text-blue-700 hover:bg-blue-200":"border border-purple-300 bg-purple-100 text-purple-700 hover:bg-purple-200";return e.jsxs("button",{onClick:()=>a(t.name),className:`inline-flex items-center rounded-lg px-2.5 py-1 text-xs font-medium transition-all duration-200 active:scale-95 ${n}`,children:[e.jsx("span",{className:"truncate max-w-[110px]",children:t.name}),l&&e.jsx("span",{className:"ml-1 text-[10px] uppercase tracking-wide "+(r?"text-amber-600":"text-blue-600"),children:"new"})]},t.name)})})}const b=o("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),p=o("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function f({title:s,url:a,description:r,thumbnail:l,thumbnails:n,favicon:i,onThumbnailChange:o}){const[d,c]=t.useState(0),[x,m]=t.useState(!1),h=n&&n.length>0?n:l?[l]:[],u=h[d],g=h.length>1;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-200",children:[u&&!x&&e.jsxs("div",{className:"relative h-32 bg-gray-100 dark:bg-gray-700 group",children:[e.jsx("img",{src:u,alt:"",className:"w-full h-full object-cover",onError:e=>{m(!0),e.currentTarget.style.display="none"}}),g&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{const e=d>0?d-1:h.length-1;c(e),m(!1),o&&h[e]&&o(h[e])},className:"absolute left-2 top-1/2 -translate-y-1/2 w-8 h-8 flex items-center justify-center rounded-full bg-black/50 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200 hover:bg-black/70 active:scale-95",title:"ä¸Šä¸€å¼ ",children:e.jsx(b,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>{const e=d<h.length-1?d+1:0;c(e),m(!1),o&&h[e]&&o(h[e])},className:"absolute right-2 top-1/2 -translate-y-1/2 w-8 h-8 flex items-center justify-center rounded-full bg-black/50 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200 hover:bg-black/70 active:scale-95",title:"ä¸‹ä¸€å¼ ",children:e.jsx(p,{className:"w-5 h-5"})}),e.jsxs("div",{className:"absolute bottom-2 right-2 px-2 py-1 rounded-full bg-black/50 text-white text-xs font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[d+1," / ",h.length]})]})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[i&&e.jsx("img",{src:i,alt:"",className:"w-5 h-5 flex-shrink-0 mt-0.5 rounded",onError:e=>{e.currentTarget.style.display="none"}}),e.jsx("h3",{className:"flex-1 text-base font-semibold text-gray-900 dark:text-white line-clamp-2 "+(l&&!i?"text-center":""),children:s})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",title:a,children:a}),r&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 line-clamp-3",children:r})]})]})}function j({message:t}){return e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 shadow-lg animate-in slide-in-from-top-5 fade-in duration-300",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 rounded-full p-1.5 flex-shrink-0",children:e.jsxs("svg",{className:"w-5 h-5 text-blue-600 dark:text-blue-400 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),e.jsxs("div",{className:"flex-1 pt-0.5",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t}),e.jsxs("div",{className:"flex gap-1 mt-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-blue-600 dark:bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("span",{className:"w-1.5 h-1.5 bg-blue-600 dark:bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("span",{className:"w-1.5 h-1.5 bg-blue-600 dark:bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]})]})})}function y({bookmark:s,newTags:a,onUpdateTags:r,onCreateSnapshot:l,onCancel:n}){const[i,o]=t.useState(null),[d,x]=t.useState(""),[m,h]=t.useState(!1),[u,g]=t.useState("");t.useEffect(()=>{c.getBookmarkSiteApiUrl().then(e=>{if(e){const t=e.replace(/\/api$/,"");x(t)}})},[]);const b=s.tags.map(e=>e.name),p=a.filter(e=>!b.includes(e)),f=p.length>0;return e.jsxs("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:[m&&e.jsx("div",{className:"absolute top-4 left-0 right-0 px-4 z-50",children:e.jsx(j,{message:u})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto animate-in zoom-in-95 duration-200",children:[e.jsx("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 rounded-t-xl",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 rounded-full p-2 flex-shrink-0",children:e.jsx("svg",{className:"w-6 h-6 text-amber-600 dark:text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"ä¹¦ç­¾å·²å­˜åœ¨"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"è¯¥ç½‘å€å·²ç»ä¿å­˜è¿‡äº†ï¼Œæ‚¨å¯ä»¥é€‰æ‹©ä»¥ä¸‹æ“ä½œ"})]})]})}),e.jsxs("div",{className:"px-6 py-4 space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"æ ‡é¢˜"}),e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.title})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"åˆ›å»ºæ—¶é—´"}),e.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:(y=s.created_at,new Date(y).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]}),s.tags.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"çŽ°æœ‰æ ‡ç­¾"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map(t=>e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300",style:t.color?{backgroundColor:`${t.color}20`,color:t.color}:void 0,children:t.name},t.id))})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:s.has_snapshot?`å·²æœ‰ ${s.snapshot_count||0} ä¸ªå¿«ç…§`:"æš‚æ— å¿«ç…§"})]}),s.has_snapshot&&d&&e.jsxs("a",{href:`${d}/bookmarks/${s.id}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",onClick:e=>e.stopPropagation(),children:["æŸ¥çœ‹å¿«ç…§",e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})]}),f&&e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-green-700 dark:text-green-400 mb-2",children:"æ£€æµ‹åˆ°æ–°æ ‡ç­¾"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:p.map(t=>e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300",children:t},t))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"è¯·é€‰æ‹©æ“ä½œï¼š"}),e.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg border-2 cursor-pointer transition-all "+("snapshot"===i?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"),children:[e.jsx("input",{type:"radio",name:"action",value:"snapshot",checked:"snapshot"===i,onChange:()=>o("snapshot"),className:"mt-0.5 w-4 h-4 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"åˆ›å»ºæ–°å¿«ç…§"}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"ä¸ºè¿™ä¸ªä¹¦ç­¾ä¿å­˜å½“å‰é¡µé¢çš„å¿«ç…§"})]})]}),f&&e.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg border-2 cursor-pointer transition-all "+("update-tags"===i?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"),children:[e.jsx("input",{type:"radio",name:"action",value:"update-tags",checked:"update-tags"===i,onChange:()=>o("update-tags"),className:"mt-0.5 w-4 h-4 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"æ·»åŠ æ–°æ ‡ç­¾"}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"å°†æ–°æ ‡ç­¾æ·»åŠ åˆ°çŽ°æœ‰ä¹¦ç­¾"})]})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700 px-6 py-4 rounded-b-xl flex gap-3",children:[e.jsx("button",{onClick:n,disabled:m,className:"flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"å–æ¶ˆ"}),e.jsx("button",{onClick:async()=>{if("snapshot"===i){h(!0),g("æ­£åœ¨æ•èŽ·é¡µé¢å†…å®¹...");try{await l(),g("å¿«ç…§åˆ›å»ºæˆåŠŸï¼"),setTimeout(()=>{h(!1),n()},1500)}catch(e){g("å¿«ç…§åˆ›å»ºå¤±è´¥"),setTimeout(()=>{h(!1)},2e3)}}else if("update-tags"===i){h(!0),g("æ­£åœ¨æ›´æ–°æ ‡ç­¾...");try{await r(a),g("æ ‡ç­¾æ›´æ–°æˆåŠŸï¼"),setTimeout(()=>{h(!1),n()},1500)}catch(e){g("æ ‡ç­¾æ›´æ–°å¤±è´¥"),setTimeout(()=>{h(!1)},2e3)}}},disabled:!i||m,className:"flex-1 px-4 py-2.5 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:bg-gray-300 dark:disabled:bg-gray-700 disabled:cursor-not-allowed transition-colors",children:m?"å¤„ç†ä¸­...":"ç¡®è®¤"})]})]})]});var y}function v({onSelectBookmark:s,onSelectTabCollection:a,onOpenOptions:r}){const[l,n]=t.useState(new Date),[i,o]=t.useState(x());t.useEffect(()=>{const e=setInterval(()=>{n(new Date)},1e3);return()=>{clearInterval(e)}},[]),t.useEffect(()=>{(async()=>{const e=await c.getTMarksConfig();if(e?.bookmarkApiUrl){const t=e.bookmarkApiUrl.replace(/\/api\/?$/,"");o(x(t))}})()},[]);return e.jsx("div",{className:"relative h-[80vh] min-h-[580px] w-[380px] overflow-hidden bg-white text-gray-900",children:e.jsxs("div",{className:"relative flex h-full flex-col",children:[e.jsx("header",{className:"px-5 pt-5 pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-xl bg-gradient-to-br from-blue-500 to-indigo-500 shadow-lg shadow-blue-500/40",children:e.jsx("svg",{className:"h-5 w-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"})})}),e.jsx("h1",{className:"text-lg font-bold text-gray-800",children:"AI æ ‡ç­¾åŠ©æ‰‹"})]}),e.jsx("button",{onClick:r,className:"flex h-9 w-9 items-center justify-center rounded-lg text-gray-600 transition-all duration-200 hover:bg-gray-100 active:scale-95",title:"æ‰“å¼€è®¾ç½®",children:e.jsxs("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})}),e.jsxs("main",{className:"flex-1 space-y-2 overflow-y-auto px-5 pb-[50px] bg-white",children:[e.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-3 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between text-gray-800",children:[e.jsx("span",{className:"text-xs font-semibold",children:(e=>{const t=e.getHours();return t>=5&&t<12?{text:"æ—©ä¸Šå¥½",emoji:"ðŸŒ…"}:t>=12&&t<14?{text:"ä¸­åˆå¥½",emoji:"â˜€ï¸"}:t>=14&&t<18?{text:"ä¸‹åˆå¥½",emoji:"ðŸŒ¤ï¸"}:t>=18&&t<22?{text:"æ™šä¸Šå¥½",emoji:"ðŸŒ†"}:{text:"å¤œæ·±äº†",emoji:"ðŸŒ™"}})(l).text}),e.jsx("span",{className:"font-mono text-base font-bold tracking-wider",children:(m=l,`${String(m.getHours()).padStart(2,"0")}:${String(m.getMinutes()).padStart(2,"0")}:${String(m.getSeconds()).padStart(2,"0")}`)})]}),e.jsxs("div",{className:"mt-1.5 flex items-center justify-between text-xs text-gray-600",children:[e.jsx("span",{children:(e=>`${e.getFullYear()}å¹´${e.getMonth()+1}æœˆ${e.getDate()}æ—¥ ${["æ˜ŸæœŸæ—¥","æ˜ŸæœŸä¸€","æ˜ŸæœŸäºŒ","æ˜ŸæœŸä¸‰","æ˜ŸæœŸå››","æ˜ŸæœŸäº”","æ˜ŸæœŸå…­"][e.getDay()]}`)(l)}),e.jsx("span",{className:"text-[10px] text-gray-500",children:(e=>{const t=d.Lunar.fromDate(e);return`${t.getYearInGanZhi()}${t.getYearShengXiao()}å¹´${t.getMonthInChinese()}æœˆ${t.getDayInChinese()}`})(l)})]})]}),e.jsx("button",{onClick:s,className:"group w-full rounded-xl border border-gray-200 bg-white p-4 text-left shadow-lg transition-all duration-200 hover:scale-[1.02] hover:border-blue-300 hover:shadow-xl active:scale-[0.98]",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br from-blue-500 to-indigo-500 shadow-lg shadow-blue-500/30 transition-transform duration-200 group-hover:scale-110",children:e.jsx("svg",{className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-800",children:"ä¿å­˜ä¹¦ç­¾"}),e.jsx("p",{className:"mt-0.5 text-xs text-gray-600",children:"ä¸ºå½“å‰é¡µé¢ç”Ÿæˆ AI æ ‡ç­¾å¹¶ä¿å­˜åˆ°ä¹¦ç­¾åº“"}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-1.5 text-[10px] text-gray-600",children:[e.jsx("span",{className:"rounded-md bg-blue-50 px-1.5 py-0.5 text-blue-600",children:"AI æŽ¨è"}),e.jsx("span",{className:"rounded-md bg-indigo-50 px-1.5 py-0.5 text-indigo-600",children:"æ™ºèƒ½æ ‡ç­¾"}),e.jsx("span",{className:"rounded-md bg-purple-50 px-1.5 py-0.5 text-purple-600",children:"äº‘ç«¯åŒæ­¥"})]})]}),e.jsx("svg",{className:"h-5 w-5 text-gray-400 transition-transform duration-200 group-hover:translate-x-1 group-hover:text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})}),e.jsx("button",{onClick:a,className:"group w-full rounded-xl border border-gray-200 bg-white p-4 text-left shadow-lg transition-all duration-200 hover:scale-[1.02] hover:border-emerald-300 hover:shadow-xl active:scale-[0.98]",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br from-emerald-500 to-teal-500 shadow-lg shadow-emerald-500/30 transition-transform duration-200 group-hover:scale-110",children:e.jsx("svg",{className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-800",children:"æ”¶çº³æ ‡ç­¾é¡µ"}),e.jsx("p",{className:"mt-0.5 text-xs text-gray-600",children:"ä¸€é”®æ”¶çº³å½“å‰çª—å£æ‰€æœ‰æ ‡ç­¾é¡µï¼Œé‡Šæ”¾å†…å­˜"}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-1.5 text-[10px] text-gray-600",children:[e.jsx("span",{className:"rounded-md bg-emerald-50 px-1.5 py-0.5 text-emerald-600",children:"æ‰¹é‡æ”¶çº³"}),e.jsx("span",{className:"rounded-md bg-teal-50 px-1.5 py-0.5 text-teal-600",children:"ä¸€é”®æ¢å¤"}),e.jsx("span",{className:"rounded-md bg-cyan-50 px-1.5 py-0.5 text-cyan-600",children:"èŠ‚çœå†…å­˜"})]})]}),e.jsx("svg",{className:"h-5 w-5 text-gray-400 transition-transform duration-200 group-hover:translate-x-1 group-hover:text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})}),e.jsxs("section",{className:"rounded-xl border border-gray-200 bg-gradient-to-br from-purple-50 to-blue-50 p-3.5 shadow-lg",children:[e.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-gray-800",children:[e.jsx("span",{children:"ðŸ’¡"}),e.jsx("span",{children:"å°è´´å£«"})]}),e.jsxs("ul",{className:"mt-2.5 space-y-2 text-xs leading-relaxed text-gray-600",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-0.5 text-blue-500",children:"â€¢"}),e.jsx("span",{children:"ä¿å­˜ä¹¦ç­¾ï¼šé€‚åˆæ”¶è—é‡è¦ç½‘é¡µï¼Œæ”¯æŒ AI æ™ºèƒ½æ ‡ç­¾"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-0.5 text-emerald-500",children:"â€¢"}),e.jsx("span",{children:"æ”¶çº³æ ‡ç­¾é¡µï¼šé€‚åˆä¸´æ—¶ä¿å­˜å¤§é‡æ ‡ç­¾é¡µï¼Œç±»ä¼¼ OneTab"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-0.5 text-purple-500",children:"â€¢"}),e.jsx("span",{children:"ä¸¤ç§æ¨¡å¼çš„æ•°æ®éƒ½ä¼šåŒæ­¥åˆ°äº‘ç«¯ä¹¦ç­¾æœåŠ¡"})]})]})]})]}),e.jsx("footer",{className:"fixed bottom-0 left-0 right-0 z-20 p-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{chrome.tabs.create({url:i.WEB_APP})},className:"flex-1 flex items-center justify-center py-2.5 rounded-lg border border-gray-200 bg-white hover:bg-gray-50 transition-colors shadow-sm",children:e.jsx("span",{className:"text-sm text-gray-700",children:"æˆ‘çš„ä¹¦ç­¾"})}),e.jsx("button",{onClick:()=>{chrome.tabs.create({url:i.TAB_GROUPS})},className:"flex-1 flex items-center justify-center py-2.5 rounded-lg border border-gray-200 bg-white hover:bg-gray-50 transition-colors shadow-sm",children:e.jsx("span",{className:"text-sm text-gray-700",children:"æˆ‘çš„æ”¶çº³"})})]})})]})});var m}function w({config:s,onBack:a}){const[i,o]=t.useState([]),[d,c]=t.useState(new Set),[x,g]=t.useState(!0),[b,p]=t.useState(!1),[f,j]=t.useState(null),[y,v]=t.useState(null),[w,N]=t.useState(!1),[k,C]=t.useState([]);t.useEffect(()=>{L()},[]);const L=async()=>{try{g(!0);const e=(await m()).filter(e=>e.id&&e.url&&!e.url.startsWith("chrome://")&&!e.url.startsWith("chrome-extension://")).map(e=>({id:e.id,title:e.title||"Untitled",url:e.url,favIconUrl:e.favIconUrl}));o(e),c(new Set(e.map(e=>e.id)))}catch(e){j("åŠ è½½æ ‡ç­¾é¡µå¤±è´¥")}finally{g(!1)}};return e.jsxs("div",{className:"relative h-[80vh] min-h-[620px] w-[380px] overflow-hidden rounded-b-2xl bg-white text-gray-900 shadow-2xl",children:[e.jsxs("div",{className:"pointer-events-none fixed top-0 left-0 right-0 z-50 px-4 pt-2 space-y-2",children:[f&&e.jsx("div",{className:"pointer-events-auto",children:e.jsx(r,{message:f,onDismiss:()=>j(null)})}),y&&e.jsx("div",{className:"pointer-events-auto",children:e.jsx(l,{message:y,onDismiss:()=>v(null)})})]}),e.jsxs("div",{className:"relative flex h-full flex-col",children:[e.jsx("header",{className:"fixed top-0 left-0 right-0 z-20 px-3 pt-2 pb-2.5 bg-white border-b border-gray-200 shadow-sm rounded-b-2xl",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:a,className:"flex h-7 w-7 flex-shrink-0 items-center justify-center rounded-lg text-gray-600 transition-all duration-200 hover:bg-gray-100 active:scale-95",title:"è¿”å›ž",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),e.jsxs("span",{className:"inline-flex flex-shrink-0 items-center gap-1 rounded-full bg-emerald-50 px-2 py-1 text-[10px] text-emerald-600 font-medium",children:["å…± ",i.length," ä¸ª"]}),e.jsxs("span",{className:"inline-flex flex-shrink-0 items-center gap-1 rounded-full bg-teal-50 px-2 py-1 text-[10px] text-teal-600 font-medium",children:["å·²é€‰ ",d.size," ä¸ª"]}),e.jsxs("div",{className:"ml-auto flex gap-1.5",children:[e.jsx("button",{onClick:a,className:"rounded-lg border border-gray-300 bg-white px-3 py-1.5 text-[11px] font-medium text-gray-700 transition-all duration-200 hover:bg-gray-50 active:scale-95",children:"å–æ¶ˆ"}),e.jsx("button",{onClick:async()=>{if(0!==d.size){p(!0),j(null);try{const e=await h(s,d);e.success?(v(e.message||"æ”¶çº³æˆåŠŸ"),C(Array.from(d)),N(!0)):j(e.error||"æ”¶çº³å¤±è´¥")}catch(e){j(e instanceof Error?e.message:"æ”¶çº³å¤±è´¥")}finally{p(!1)}}else j("è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªæ ‡ç­¾é¡µ")},disabled:b||0===d.size,className:"rounded-lg bg-gradient-to-r from-emerald-500 to-teal-500 px-4 py-1.5 text-[11px] font-semibold text-white shadow-sm transition-all duration-200 hover:shadow-md disabled:cursor-not-allowed disabled:opacity-40 active:scale-95",children:b?e.jsxs("span",{className:"flex items-center justify-center gap-1",children:[e.jsxs("svg",{className:"h-3.5 w-3.5 animate-spin text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"æ”¶çº³ä¸­"]}):"æ”¶çº³"})]})]})}),w&&e.jsx("div",{className:"fixed top-[60px] left-0 right-0 z-40 px-4 pt-2 animate-in slide-in-from-top-5 fade-in duration-300",children:e.jsxs("section",{className:"rounded-2xl border border-emerald-200 bg-gradient-to-br from-emerald-50 to-teal-50 p-4 shadow-lg",children:[e.jsxs("div",{className:"mb-3 flex items-start gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-emerald-100",children:e.jsx("svg",{className:"h-5 w-5 text-emerald-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"æ”¶çº³æˆåŠŸ"}),e.jsxs("p",{className:"mt-1 text-xs text-gray-600",children:["å·²æˆåŠŸæ”¶çº³ ",k.length," ä¸ªæ ‡ç­¾é¡µã€‚æ˜¯å¦å…³é—­è¿™äº›æ ‡ç­¾é¡µï¼Ÿ"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{N(!1),C([]),window.close()},className:"flex-1 rounded-xl border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition-all duration-200 hover:bg-gray-50 active:scale-95",children:"ä¿ç•™æ ‡ç­¾é¡µ"}),e.jsx("button",{onClick:async()=>{try{await u(k),window.close()}catch(e){j("å…³é—­æ ‡ç­¾é¡µå¤±è´¥")}},className:"flex-1 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-500 px-4 py-2 text-sm font-semibold text-white shadow-sm transition-all duration-200 hover:shadow-md active:scale-95",children:"å…³é—­æ ‡ç­¾é¡µ"})]})]})}),e.jsx("main",{className:"relative flex-1 space-y-3 overflow-y-auto px-4 pb-5 bg-white "+(w?"pt-[180px]":"pt-[60px]"),children:x?e.jsxs("section",{className:"flex items-center gap-3 rounded-2xl border border-gray-200 bg-white p-4 text-sm text-gray-700 shadow-sm",children:[e.jsx(n,{}),e.jsx("p",{children:"æ­£åœ¨åŠ è½½æ ‡ç­¾é¡µ..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"rounded-2xl border border-gray-200 bg-white p-3 shadow-sm",children:e.jsxs("button",{onClick:()=>{d.size===i.length?c(new Set):c(new Set(i.map(e=>e.id)))},className:"flex w-full items-center justify-between rounded-xl bg-gray-50 px-4 py-2 text-sm font-medium text-gray-800 transition-all duration-200 hover:bg-gray-100 active:scale-95",children:[e.jsx("span",{children:d.size===i.length?"å–æ¶ˆå…¨é€‰":"å…¨é€‰"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[d.size," / ",i.length]})]})}),e.jsx("section",{className:"space-y-2",children:i.map(t=>{const s=d.has(t.id);return e.jsx("button",{onClick:()=>(e=>{const t=new Set(d);t.has(e)?t.delete(e):t.add(e),c(t)})(t.id),className:"group w-full rounded-2xl border p-3 text-left transition-all duration-200 active:scale-[0.98] "+(s?"border-emerald-300 bg-emerald-50 shadow-md":"border-gray-200 bg-white hover:bg-gray-50"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5 flex h-5 w-5 items-center justify-center rounded-md border-2 transition-all duration-200 "+(s?"border-emerald-500 bg-emerald-500":"border-gray-300 bg-white"),children:s&&e.jsx("svg",{className:"h-3 w-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),t.favIconUrl&&e.jsx("img",{src:t.favIconUrl,alt:"",className:"h-5 w-5 rounded"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"truncate text-sm font-medium text-gray-800",children:t.title}),e.jsx("p",{className:"truncate text-xs text-gray-500",children:t.url})]})]})},t.id)})})]})})]})]})}function N(){const{currentPage:s,recommendedTags:a,existingTags:o,selectedTags:d,isLoading:c,isSaving:x,isRecommending:m,error:h,successMessage:u,loadingMessage:b,existingBookmark:p,config:N,loadConfig:k,loadExistingTags:C,extractPageInfo:L,recommendTags:S,saveBookmark:M,setError:B,toggleTag:z,addCustomTag:T,setCurrentPage:A,includeThumbnail:I,setIncludeThumbnail:W,isPublic:E,setIsPublic:$,createSnapshot:D,setCreateSnapshot:P,setExistingBookmark:H,updateExistingBookmarkTags:V,createSnapshotForBookmark:_,lastRecommendationSource:U,lastSaveDurationMs:O}=i(),[K,F]=t.useState(""),[R,Y]=t.useState(""),[G,q]=t.useState(!1),[X,Z]=t.useState("selector");t.useEffect(()=>{Y(s?.title??"")},[s?.title]),t.useEffect(()=>{k(),C()},[]);const J=Boolean(N&&N.bookmarkSite.apiKey),Q=Boolean(N&&N.preferences.enableAI&&N.aiConfig.apiKeys[N.aiConfig.provider]);t.useEffect(()=>{if(!N||G||"bookmark"!==X)return;(async()=>{if(J)try{await L();N.preferences.enableAI&&Boolean(N.aiConfig.apiKeys[N.aiConfig.provider])&&await S(),q(!0)}catch(e){B(e instanceof Error?e.message:"Failed to initialize"),q(!0)}else q(!0)})()},[N,X]);const ee=()=>{const e=K.trim();e&&(T(e),F(""))},te=()=>{const e=R.trim();e&&s&&(A({...s,title:e}),Y(e))},se=()=>{chrome.runtime.openOptionsPage()},ae=()=>{Z("bookmark"),q(!1)},re=()=>{Z("tabCollection")},le=()=>{Z("selector")};return"selector"===X?e.jsx(v,{onSelectBookmark:ae,onSelectTabCollection:re,onOpenOptions:se}):"tabCollection"===X?N?e.jsx(w,{config:N.bookmarkSite,onBack:le}):e.jsx("div",{children:"Loading..."}):G&&!J?e.jsxs("div",{className:"relative h-[80vh] min-h-[580px] w-[380px] overflow-hidden rounded-2xl bg-slate-950 text-slate-100 shadow-2xl",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(59,130,246,0.35),transparent_70%)] opacity-80"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_bottom,_rgba(165,180,252,0.25),transparent_65%)] opacity-80"}),e.jsx("div",{className:"absolute inset-0 bg-slate-950/85 backdrop-blur-2xl"}),e.jsxs("div",{className:"relative flex h-full flex-col",children:[e.jsx("header",{className:"px-6 pt-8 pb-6",children:e.jsx("div",{className:"rounded-3xl border border-white/10 bg-white/10 p-5 shadow-xl shadow-blue-900/20 backdrop-blur-xl",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-500 shadow-lg shadow-blue-500/40",children:e.jsx("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-white/60",children:"Onboarding"}),e.jsx("h1",{className:"text-2xl font-semibold text-white",children:"æ¬¢è¿Žä½¿ç”¨ AI ä¹¦ç­¾åŠ©æ‰‹"}),e.jsx("p",{className:"text-sm text-white/70",children:"å®ŒæˆåŸºç¡€é…ç½®ï¼Œå³å¯ä¸ºä»»æ„ç½‘é¡µç”Ÿæˆæ™ºèƒ½æ ‡ç­¾ä¸Žåˆ†ç±»å»ºè®®ã€‚"})]})]})})}),e.jsxs("main",{className:"flex-1 space-y-5 overflow-y-auto px-6 pb-6",children:[e.jsxs("section",{className:"rounded-3xl border border-white/10 bg-white/5 p-5 shadow-inner shadow-indigo-500/10 backdrop-blur-xl",children:[e.jsx("h2",{className:"text-sm font-semibold text-white",children:"å¿…å¤‡ä¿¡æ¯"}),e.jsx("p",{className:"mt-1 text-xs text-white/60",children:"å‡†å¤‡ä»¥ä¸‹ä¸‰é¡¹é…ç½®ï¼ŒåŠ©æ‰‹å³å¯ç«‹å³å¼€å§‹å·¥ä½œï¼š"}),e.jsxs("ol",{className:"mt-4 space-y-3 text-xs text-white/75",children:[e.jsxs("li",{className:"flex gap-3 rounded-2xl border border-white/5 bg-white/5 p-3",children:[e.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-xl bg-blue-500/30 text-[11px] font-semibold text-blue-100",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:"AI æœåŠ¡ API Key"}),e.jsx("p",{className:"mt-1 text-[11px] text-white/60",children:"ç”¨äºŽç”Ÿæˆæ™ºèƒ½æ ‡ç­¾çš„æ¨¡åž‹å‡­è¯ï¼Œæ”¯æŒå¤šä¸ªä¸»æµæœåŠ¡å•†ã€‚"})]})]}),e.jsxs("li",{className:"flex gap-3 rounded-2xl border border-white/5 bg-white/5 p-3",children:[e.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-xl bg-blue-500/30 text-[11px] font-semibold text-blue-100",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:"ä¹¦ç­¾ç«™ç‚¹ API åœ°å€"}),e.jsx("p",{className:"mt-1 text-[11px] text-white/60",children:"æŒ‡å‘ä½ çš„ä¹¦ç­¾æœåŠ¡ç«¯ç‚¹ï¼Œé»˜è®¤ä¸º TMarks å®˜æ–¹åœ°å€ã€‚"})]})]}),e.jsxs("li",{className:"flex gap-3 rounded-2xl border border-white/5 bg-white/5 p-3",children:[e.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded-xl bg-blue-500/30 text-[11px] font-semibold text-blue-100",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:"ä¹¦ç­¾ç«™ç‚¹ API Key"}),e.jsx("p",{className:"mt-1 text-[11px] text-white/60",children:"ç”¨äºŽåŒæ­¥ä¸Žä¿å­˜ä¹¦ç­¾æ•°æ®ï¼Œè¯·åœ¨æœåŠ¡ç«¯æŽ§åˆ¶å°ç”Ÿæˆå¯†é’¥ã€‚"})]})]})]})]}),e.jsxs("section",{className:"rounded-3xl border border-white/10 bg-gradient-to-br from-blue-500/10 via-indigo-500/10 to-purple-500/10 p-5 shadow-lg shadow-blue-900/20 backdrop-blur-xl",children:[e.jsx("h2",{className:"text-sm font-semibold text-white",children:"å°è´´å£«"}),e.jsxs("ul",{className:"mt-3 list-disc space-y-2 pl-5 text-[11px] text-white/70",children:[e.jsx("li",{children:"å¯åœ¨è®¾ç½®é¡µä¿å­˜å¤šä¸ª API ä¸Žæ¨¡åž‹ç»„åˆï¼Œä¸€é”®åˆ‡æ¢åœºæ™¯ã€‚"}),e.jsx("li",{children:"æ”¯æŒè‡ªå®šä¹‰ Promptï¼Œæ»¡è¶³ä¸åŒæ ‡ç­¾é£Žæ ¼æˆ–è¯­è¨€éœ€æ±‚ã€‚"}),e.jsx("li",{children:"é…ç½®å®ŒæˆåŽï¼ŒåŠ©æ‰‹ä¼šè‡ªåŠ¨æŠ“å–å½“å‰æ ‡ç­¾é¡µå¹¶ç”ŸæˆæŽ¨èã€‚"})]})]})]}),e.jsx("footer",{className:"px-6 pb-6",children:e.jsxs("button",{onClick:se,className:"flex w-full items-center justify-center gap-2 rounded-2xl bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500 px-6 py-3 text-sm font-semibold text-white shadow-lg shadow-blue-500/30 transition-all duration-200 hover:shadow-xl hover:shadow-blue-500/40 active:scale-95",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"å‰å¾€è®¾ç½®"]})})]})]}):e.jsxs("div",{className:"relative h-[80vh] min-h-[620px] w-[380px] overflow-hidden rounded-2xl bg-white text-gray-900 shadow-2xl",children:[e.jsxs("div",{className:"pointer-events-none fixed top-0 left-0 right-0 z-50 px-4 pt-2 space-y-2",children:[h&&e.jsx("div",{className:"pointer-events-auto",children:e.jsx(r,{message:h,onDismiss:()=>B(null),onRetry:c||"fallback"!==U?void 0:S})}),b&&e.jsx("div",{className:"pointer-events-auto",children:e.jsx(j,{message:b})}),u&&e.jsx("div",{className:"pointer-events-auto",children:e.jsx(l,{message:u})})]}),e.jsxs("div",{className:"relative flex h-full flex-col",children:[e.jsx("header",{className:"fixed top-0 left-0 right-0 z-20 px-3 pt-2 pb-2.5 bg-white border-b border-gray-200 shadow-sm rounded-b-2xl",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:le,className:"flex h-7 w-7 flex-shrink-0 items-center justify-center rounded-lg text-gray-600 transition-all duration-200 hover:bg-gray-100 active:scale-95",title:"è¿”å›ž",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),Q?e.jsxs("span",{className:"inline-flex flex-shrink-0 items-center gap-1 rounded-full bg-blue-50 px-2 py-1 text-[10px] text-blue-600 font-medium",children:["æŽ¨è ",a.length]}):e.jsx("span",{className:"inline-flex flex-shrink-0 items-center gap-1 rounded-full bg-amber-50 px-2 py-1 text-[10px] text-amber-600 font-medium",children:"AI å…³é—­"}),e.jsxs("span",{className:"inline-flex flex-shrink-0 items-center gap-1 rounded-full bg-indigo-50 px-2 py-1 text-[10px] text-indigo-600 font-medium",children:["å·²é€‰ ",d.length]}),e.jsxs("span",{className:"inline-flex flex-shrink-0 items-center gap-1 rounded-full bg-purple-50 px-2 py-1 text-[10px] text-purple-600 font-medium",children:["åº“ ",o.length]}),e.jsxs("div",{className:"ml-auto flex gap-1.5",children:[e.jsx("button",{onClick:()=>window.close(),className:"rounded-lg border border-gray-300 bg-white px-3 py-1.5 text-[11px] font-medium text-gray-700 transition-all duration-200 hover:bg-gray-50 active:scale-95",children:"å–æ¶ˆ"}),e.jsx("button",{onClick:async()=>{0!==d.length?await M():B("è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªæ ‡ç­¾")},disabled:x||0===d.length,className:"rounded-lg bg-gradient-to-r from-blue-500 to-indigo-500 px-4 py-1.5 text-[11px] font-semibold text-white shadow-sm transition-all duration-200 hover:shadow-md disabled:cursor-not-allowed disabled:opacity-40 active:scale-95",children:x?e.jsxs("span",{className:"flex items-center justify-center gap-1",children:[e.jsxs("svg",{className:"h-3.5 w-3.5 animate-spin text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"ä¿å­˜ä¸­"]}):"ä¿å­˜ä¹¦ç­¾"})]})]})}),e.jsxs("main",{className:"relative flex-1 space-y-2.5 overflow-y-auto px-4 pb-[70px] pt-[60px] bg-white",children:[m&&e.jsxs("section",{className:"flex items-center gap-3 rounded-xl border border-gray-200 bg-white p-3.5 text-sm text-gray-700 shadow-lg",children:[e.jsx(n,{}),e.jsx("p",{children:"AI æ­£åœ¨åˆ†æžå½“å‰é¡µé¢ï¼Œè¯·ç¨å€™..."})]}),!Q&&!m&&0===a.length&&e.jsx("section",{className:"rounded-xl border border-amber-200 bg-gradient-to-br from-amber-50 to-orange-50 p-3.5 shadow-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"h-5 w-5 flex-shrink-0 text-amber-500 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-amber-800",children:"AI æŽ¨èå·²å…³é—­"}),e.jsx("p",{className:"mt-1 text-xs text-amber-600",children:"è¯·ä»Žä¸‹æ–¹æ ‡ç­¾åº“ä¸­é€‰æ‹©æ ‡ç­¾ï¼Œæˆ–åœ¨è®¾ç½®ä¸­å¯ç”¨ AI æŽ¨èã€‚"})]})]})}),d.length>0&&e.jsxs("section",{className:"rounded-xl border border-blue-200 bg-gradient-to-br from-blue-50 to-indigo-50 p-3.5 shadow-lg",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:"å·²é€‰æ‹©æ ‡ç­¾"}),e.jsx("span",{className:"text-[10px] text-gray-500",children:"ç‚¹å‡»æ ‡ç­¾å¯å–æ¶ˆé€‰æ‹©ã€‚"})]}),e.jsx("span",{className:"rounded-full bg-blue-100 px-2 py-0.5 text-xs font-medium text-blue-700",children:d.length})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:d.map(t=>e.jsx("button",{onClick:()=>z(t),title:"ç‚¹å‡»ç§»é™¤æ ‡ç­¾",className:"inline-flex items-center rounded-lg bg-white px-2.5 py-1 text-xs font-semibold text-blue-700 border border-blue-200 shadow-sm transition-all duration-200 hover:bg-blue-50 active:scale-95",children:e.jsx("span",{className:"truncate max-w-[120px]",children:t})},t))})]}),s&&e.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-3.5 shadow-lg",children:[e.jsxs("div",{className:"mb-2.5 flex items-center justify-center gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>$(!E),className:"rounded-lg border px-3 py-1 text-xs font-medium transition-all duration-150 focus:outline-none focus-visible:ring-2 "+(E?"border-emerald-400 bg-emerald-50 text-emerald-700 shadow-sm focus-visible:ring-emerald-300":"border-blue-400 bg-blue-50 text-blue-700 shadow-sm focus-visible:ring-blue-300"),title:E?"ç‚¹å‡»åˆ‡æ¢ä¸ºéšç§":"ç‚¹å‡»åˆ‡æ¢ä¸ºå…¬å¼€",children:[e.jsx("svg",{className:"inline-block w-3 h-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:E?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),E?"å…¬å¼€":"éšç§"]}),e.jsx("button",{type:"button",onClick:()=>{W(!!s?.thumbnail&&!I)},disabled:!s.thumbnail,className:`rounded-lg border px-3 py-1 text-xs font-medium transition-all duration-150 focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300 ${I?"border-amber-400 bg-amber-50 text-amber-700 shadow-sm":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"} ${s.thumbnail?"":"cursor-not-allowed opacity-40"}`,children:I?"åŒ…å«å°é¢å›¾":"å¿½ç•¥å°é¢å›¾"}),e.jsxs("button",{type:"button",onClick:()=>P(!D),className:"rounded-lg border px-3 py-1 text-xs font-medium transition-all duration-150 focus:outline-none focus-visible:ring-2 focus-visible:ring-purple-300 "+(D?"border-purple-400 bg-purple-50 text-purple-700 shadow-sm":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"),title:"ä¿å­˜ç½‘é¡µå¿«ç…§",children:[e.jsxs("svg",{className:"inline-block w-3 h-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),D?"åˆ›å»ºå¿«ç…§":"ä¸åˆ›å»ºå¿«ç…§"]})]}),e.jsx("div",{className:"mb-2.5",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:R,onChange:e=>Y(e.target.value),onKeyDown:e=>{"Enter"===e.key&&te()},placeholder:"è¾“å…¥è‡ªå®šä¹‰æ ‡é¢˜åŽå›žè½¦æˆ–ç‚¹å‡»åº”ç”¨",className:"flex-1 rounded-xl border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("button",{onClick:te,disabled:!R.trim()||!s,className:"rounded-xl bg-gradient-to-r from-blue-500 to-indigo-500 px-4 py-2 text-sm font-medium text-white shadow-sm transition-all duration-200 hover:shadow-md disabled:cursor-not-allowed disabled:opacity-40 active:scale-95",children:"åº”ç”¨"})]})}),e.jsx(f,{title:s.title,url:s.url,description:s.description,thumbnail:I?s.thumbnail:void 0,thumbnails:I?s.thumbnails:void 0,favicon:s.favicon,onThumbnailChange:e=>{A({...s,thumbnail:e})}})]}),a.length>0&&e.jsxs("section",{className:"rounded-xl border border-purple-200 bg-gradient-to-br from-purple-50 to-blue-50 p-3.5 shadow-lg",children:[e.jsxs("div",{className:"mb-2.5 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"flex items-center gap-2 text-sm font-semibold text-gray-800",children:"AI æŽ¨è"}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"æ ¹æ®é¡µé¢å†…å®¹å®žæ—¶ç”Ÿæˆï¼Œç‚¹å‡»å¯å¿«é€Ÿé€‰æ‹©ã€‚"})]}),e.jsx("span",{className:"rounded-full bg-purple-100 px-2 py-0.5 text-xs font-medium text-purple-700",children:a.length})]}),e.jsx(g,{tags:a,selectedTags:d,onToggle:z})]}),e.jsxs("section",{className:"rounded-xl border border-emerald-200 bg-gradient-to-br from-emerald-50 to-teal-50 p-3.5 shadow-lg",children:[e.jsxs("div",{className:"mb-2.5 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"flex items-center gap-2 text-sm font-semibold text-gray-800",children:[e.jsx("svg",{className:"h-4 w-4 text-emerald-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"æ ‡ç­¾åº“"]}),e.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"ä¸Žä½ çš„åŽ†å²æ ‡ç­¾æ•°æ®åŒæ­¥ï¼Œç‚¹é€‰å³å¯åŠ å…¥ã€‚"})]}),e.jsx("span",{className:"rounded-full bg-emerald-100 px-2 py-0.5 text-xs font-medium text-emerald-700",children:o.length})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto pr-1 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent",children:0===o.length?e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx("p",{className:"text-xs text-gray-500",children:c?"åŠ è½½ä¸­...":"æš‚æ— æ ‡ç­¾"})}):e.jsx("div",{className:"flex flex-wrap gap-1.5",children:o.sort((e,t)=>t.count-e.count).map(t=>{const s=d.includes(t.name);return e.jsxs("button",{onClick:()=>z(t.name),className:"inline-flex items-center rounded-lg px-2.5 py-1 text-xs font-medium transition-all duration-200 active:scale-95 "+(s?"border border-emerald-300 bg-emerald-100 text-emerald-700 shadow-sm":"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50"),children:[e.jsx("span",{className:"mr-1.5 h-1.5 w-1.5 flex-shrink-0 rounded-full",style:{backgroundColor:t.color||"#34d399"}}),e.jsx("span",{className:"truncate max-w-[110px]",children:t.name}),t.count>0&&e.jsxs("span",{className:"ml-1 text-[10px] opacity-60",children:["(",t.count,")"]})]},t.id)})})})]}),null!==O&&e.jsxs("section",{className:"rounded-xl border border-gray-200 bg-white p-2.5 text-xs text-gray-600 shadow-sm",children:["æœ€è¿‘ä¸€æ¬¡ä¿å­˜è€—æ—¶ ",(O/1e3).toFixed(2),"s"]})]}),e.jsx("footer",{className:"fixed bottom-0 left-0 right-0 z-20 px-3 pt-2 pb-2.5 bg-white border-t border-gray-200 shadow-sm rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"h-4 w-4 flex-shrink-0 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),e.jsx("input",{type:"text",value:K,onChange:e=>F(e.target.value),onKeyPress:e=>{"Enter"===e.key&&ee()},placeholder:"è¾“å…¥æ ‡ç­¾åå¹¶å›žè½¦æ·»åŠ ",className:"flex-1 rounded-xl border border-gray-300 bg-white px-3 py-1.5 text-sm text-gray-900 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("button",{onClick:ee,disabled:!K.trim(),className:"rounded-xl bg-gradient-to-r from-blue-500 to-indigo-500 px-4 py-1.5 text-sm font-medium text-white shadow-sm transition-all duration-200 hover:shadow-md disabled:cursor-not-allowed disabled:opacity-40 active:scale-95",children:"æ·»åŠ "})]})})]}),p&&p.needsDialog&&e.jsx(y,{bookmark:p,newTags:d,onUpdateTags:async e=>{p.id&&await V(p.id,e)},onCreateSnapshot:async()=>{p.id&&await _(p.id)},onCancel:()=>H(null)})]})}const k=document.getElementById("root");k&&s.createRoot(k).render(e.jsx(a.StrictMode,{children:e.jsx(N,{})}));
